<?php  return array (
  'resourceClass' => 'modDocument',
  'resource' => 
  array (
    'id' => 19,
    'type' => 'document',
    'contentType' => 'text/html',
    'pagetitle' => 'Solution sub item 5',
    'longtitle' => 'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s',
    'description' => '',
    'alias' => 'solution-sub-item-4',
    'link_attributes' => '',
    'published' => 1,
    'pub_date' => 0,
    'unpub_date' => 0,
    'parent' => 10,
    'isfolder' => 1,
    'introtext' => 'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book',
    'content' => '<div class="col-md-9 offset-md-3 col-sm-12">
	<div class="description-text">
		<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. </p>
		<p>Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.</p>
	</div>
</div>
<div class="col-md-12">
	<div class="description-cite">
		<p class="description-cite-text">“Once a team is clear about its lead measures, their view of the goal changes.”</p>
		<p class="description-cite-author">CHRIS MCCHESNEY, CO-AUTHOR OF THE 4 DISCIPLINES OF EXECUTION</p>
	</div>
</div>
<div class="col-md-9 offset-md-3 col-sm-12">
	<div class="description-list">
		<h4 class="description-list-sub-title sub-title">Some list items</h4>
		<ul class="description-list">
			<li class="description-list-item">
				<h5 class="description-list-title title">Research and analysis</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Planning the stages of the project</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Implementation of solutions</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Process Optimization</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Inspiration and involvement of staff</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
		</ul>
	</div>',
    'richtext' => 0,
    'template' => 2,
    'menuindex' => 0,
    'searchable' => 1,
    'cacheable' => 1,
    'createdby' => 1,
    'createdon' => 1532368594,
    'editedby' => 1,
    'editedon' => 1532368638,
    'deleted' => 0,
    'deletedon' => 0,
    'deletedby' => 0,
    'publishedon' => 1532368560,
    'publishedby' => 1,
    'menutitle' => '',
    'donthit' => 0,
    'privateweb' => 0,
    'privatemgr' => 0,
    'content_dispo' => 0,
    'hidemenu' => 0,
    'class_key' => 'modDocument',
    'context_key' => 'web',
    'content_type' => 1,
    'uri' => 'soution-1/solution-sub-item-4/',
    'uri_override' => 0,
    'hide_children_in_tree' => 0,
    'show_in_tree' => 0,
    'properties' => NULL,
    'solution-page-header-img' => 
    array (
      0 => 'solution-page-header-img',
      1 => 'solution_items/sub-item-1.jpg',
      2 => 'default',
      3 => NULL,
      4 => 'image',
    ),
    'solution-page-interaction' => 
    array (
      0 => 'solution-page-interaction',
      1 => '[{"MIGX_id":"3","image":"solution_items\\/sub-item-1-img-1.png","title":"LOREM IPSUM IS SIMPLY DUMMY TEXT OF THE PRINTING","description":"<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur<\\/p>\\n<p>Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of \\"de Finibus Bonorum et Malorum\\" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance.<\\/p>"}]',
      2 => 'default',
      3 => NULL,
      4 => 'migx',
    ),
    '_content' => '<!DOCTYPE html>
<html lang="ru">

<head>

	<meta charset="UTF-8">
	<base href="[[!++site_url]]">
    
	<title>Solution sub item 5 - ETS International</title>
	<meta name="description" content="">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	
	<!-- Template Basic Images Start -->
	<meta property="og:image" content="path/to/image.jpg">
	<link rel="icon" href="">
	<link rel="apple-touch-icon" sizes="180x180" href="">
	<!-- Template Basic Images End -->
	
	<!-- Custom Browsers Color Start -->
	<meta name="theme-color" content="#000">
	<!-- Custom Browsers Color End -->

	<link rel="stylesheet" href="assets/app/css/main.min.css">

</head>

<body>
    <div class="loader">
		<div class="loader_inner">
			<div class=\'loader-ring\'>
				<div class=\'loader-ring-light\'></div>
				<div class=\'loader-ring-track\'></div>
			</div>
		</div>
	</div>

<!-- Header section -->
<header>
    
<!-- Menu section -->
<section class="mnu">
	<div class="mnu-mob"></div>
	<div class="container">
		<div class="row">
			<div class="col-lg-3 col-md-12 col-12 scroll-to-id">
				<a href="http://ets.international/#slider" class="mnu-logo"><img src="/assets/app/img/logo.svg" alt="ETS International"></a>
				<div class="mnu-btn">
					<div class="sandwich">
						<div class="sw-topper"></div>
						<div class="sw-bottom"></div>
						<div class="sw-footer"></div>
					</div>
				</div>
			</div>
			<div class="col-lg-9 col-md-12 col-12">
				<ul class="mnu-line">
					<li class="mnu-item scroll-to-id"><a href="http://ets.international/#slider">Home</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#about-us">about us</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#approach">approach</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#solutions">solutions</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#clients">our clients</a></li>
                    <li class="mnu-item scroll-to-id"><a href="#contacts">Contact us</a></li>
                </ul>
			</div>
		</div>
	</div>
</section>

	<!-- Title section -->
<section class="product-head" style="background-image: url([[!phpthumbof? &input=`/assets/app/img/solution_items/sub-item-1.jpg` &options=`&h=480&zc=1`]]);">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="product-head-bc">
					<a href="[[!++site_url]]">TMS | HOME</a>
					&nbsp;&gt;&nbsp;
					<a><!-- I think without href -->Solution sub item 5</a>
				</div>
				<h4 class="product-head-title title">Solution sub item 5</h4>
			</div>
		</div>
	</div>
</section>
</header>

<!-- Description section -->
<section class="description">
	<div class="container">
		<div class="row">
			<div class="col-md-9 offset-md-3 col-sm-12">
				<h5 class="description-sub-title">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s</h5>
			</div>
			<div class="col-md-9 offset-md-3 col-sm-12">
	<div class="description-text">
		<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. </p>
		<p>Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.</p>
	</div>
</div>
<div class="col-md-12">
	<div class="description-cite">
		<p class="description-cite-text">“Once a team is clear about its lead measures, their view of the goal changes.”</p>
		<p class="description-cite-author">CHRIS MCCHESNEY, CO-AUTHOR OF THE 4 DISCIPLINES OF EXECUTION</p>
	</div>
</div>
<div class="col-md-9 offset-md-3 col-sm-12">
	<div class="description-list">
		<h4 class="description-list-sub-title sub-title">Some list items</h4>
		<ul class="description-list">
			<li class="description-list-item">
				<h5 class="description-list-title title">Research and analysis</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Planning the stages of the project</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Implementation of solutions</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Process Optimization</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Inspiration and involvement of staff</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
		</ul>
	</div>
		</div>
	</div>
</section>

<!-- Interaction section -->
<section class="interaction">
	<div class="container">
		<div class="row">
			<div class="col-xl-8 col-lg-7 col-md-12">
				<div class="interaction-img-wrap"><img src="assets/app/img/solution_items/sub-item-1-img-1.png" alt=""></div>
			</div>
			<div class="col-xl-4 col-lg-5 col-md-12">
				<h5 class="interaction-title sub-title">LOREM IPSUM IS SIMPLY DUMMY TEXT OF THE PRINTING</h5>
				<div class="interaction-text">
					<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur</p>
<p>Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance.</p>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- Read more section -->
<section class="read-more">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="read-more-btn-cont">
				    <div class="read-more-btn-wrap read-more-btn-prev">
			                <a href="/soution-1/solution-sub-item-3/" class="read-more-btn"><span>prev: </span>Solution sub item 3</a>
			            </div><div class="read-more-btn-wrap read-more-btn-next">
			                <a href="/soution-1/solution-sub-item-5/" class="read-more-btn"><span>next: </span>Solution sub item 4</a>
			            </div>
				</div>
			</div>
		</div>
	</div>
</section>
	
<!-- Footer section -->
	<footer class="footer" id="footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-sm-12 col-12 scroll-to-id">
					<a href="http://ets.international/#slider" class="footer-logo"><img src="/assets/app/img/logo-light.svg" alt="ETS International"></a>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-mnu">
						<h5 class="footer-mnu-title footer-title">
						     info
						</h5>
						<ul class="footer-mnu-line">
					    	<li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#slider">Home</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#about-us">about us</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#approach">approach</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#solutions">solutions</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#clients">our clients</a></li>
                            <li class="footer-mnu-item scroll-to-id"><a href="#contacts">Contact us</a></li>
                        </ul>
					</div>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-contacts" id="contacts">
						<h5 class="footer-contacts-title footer-title">
						     contact us
						</h5>
					    <p class="footer-contacts-desc"><a href="mailto:info@richardson.com" target="_blank">info@richardson.com</a></p>
						<p class="footer-contacts-desc">US: <a href="tel:1-215-940-9255" target="_blank">+1-215-940-9255</a></p><p class="footer-contacts-desc">EMEA: <a href="tel:44 (0) 20 7917 1806" target="_blank">+44 (0) 20 7917 1806</a></p><p class="footer-contacts-desc">APAC: <a href="tel:61 (0) 8 8376 1667" target="_blank">+61 (0) 8 8376 1667</a></p>
                        <p class="footer-contacts-address">1818 Market Street, 2800,<br>Philadelphia, PA 19103</p>
					</div>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-social">
						<div class="footer-social-title footer-title">
						     follow us
						</div>
						<div class="footer-social-line">
						    <div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/facebook-f-brands.svg" alt="facebook"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/linkedin-in-brands.svg" alt="linkedin"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/twitter-brands.svg" alt="twitter"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/instagram-brands.svg" alt="instagram"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/youtube-brands.svg" alt="youtube"></a>
</div>
						</div>
					</div>
				</div>
				<div class="col-md-12">
					<div class="footer-credits">
						<hr>
						<p class="footer-credits-desc">
							Copyright © 2018 Company. All rights reserved. | Privacy Policy
						</p>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<script src="assets/app/js/scripts.min.js"></script>

</body>
</html>	',
    '_isForward' => false,
  ),
  'contentType' => 
  array (
    'id' => 1,
    'name' => 'HTML',
    'description' => 'HTML content',
    'mime_type' => 'text/html',
    'file_extensions' => '.html',
    'headers' => NULL,
    'binary' => 0,
  ),
  'policyCache' => 
  array (
  ),
  'elementCache' => 
  array (
    '[[pdoField? &field=`favicon-small` &limit=`1`]]' => '',
    '[[pdoField? &field=`favicon-big` &limit=`1`]]' => '',
    '[[$head? &pageTitle=`Solution sub item 5 - ETS International`]]' => '<!DOCTYPE html>
<html lang="ru">

<head>

	<meta charset="UTF-8">
	<base href="[[!++site_url]]">
    
	<title>Solution sub item 5 - ETS International</title>
	<meta name="description" content="">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	
	<!-- Template Basic Images Start -->
	<meta property="og:image" content="path/to/image.jpg">
	<link rel="icon" href="">
	<link rel="apple-touch-icon" sizes="180x180" href="">
	<!-- Template Basic Images End -->
	
	<!-- Custom Browsers Color Start -->
	<meta name="theme-color" content="#000">
	<!-- Custom Browsers Color End -->

	<link rel="stylesheet" href="assets/app/css/main.min.css">

</head>

<body>
    <div class="loader">
		<div class="loader_inner">
			<div class=\'loader-ring\'>
				<div class=\'loader-ring-light\'></div>
				<div class=\'loader-ring-track\'></div>
			</div>
		</div>
	</div>',
    '[[pdoField? &field=`main-logo` &limit=`1` &id=`1`]]' => '/assets/app/img/logo.svg',
    '[[getImageList? 
                        &tvname=`menu`
                        &tpl=`@CODE:<li class="mnu-item scroll-to-id"><a href="http://ets.international/[[+anchor]]">[[+title]]</a></li>`
                        &docid= `1`
                        &limit=`5`
                    ]]' => '<li class="mnu-item scroll-to-id"><a href="http://ets.international/#slider">Home</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#about-us">about us</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#approach">approach</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#solutions">solutions</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#clients">our clients</a></li>',
    '[[$header? &menuId=`http://ets.international/`]]' => '
<!-- Menu section -->
<section class="mnu">
	<div class="mnu-mob"></div>
	<div class="container">
		<div class="row">
			<div class="col-lg-3 col-md-12 col-12 scroll-to-id">
				<a href="http://ets.international/#slider" class="mnu-logo"><img src="/assets/app/img/logo.svg" alt="ETS International"></a>
				<div class="mnu-btn">
					<div class="sandwich">
						<div class="sw-topper"></div>
						<div class="sw-bottom"></div>
						<div class="sw-footer"></div>
					</div>
				</div>
			</div>
			<div class="col-lg-9 col-md-12 col-12">
				<ul class="mnu-line">
					<li class="mnu-item scroll-to-id"><a href="http://ets.international/#slider">Home</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#about-us">about us</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#approach">approach</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#solutions">solutions</a></li><li class="mnu-item scroll-to-id"><a href="http://ets.international/#clients">our clients</a></li>
                    <li class="mnu-item scroll-to-id"><a href="#contacts">Contact us</a></li>
                </ul>
			</div>
		</div>
	</div>
</section>
',
    '[[pdoField? &field=`solution-page-header-img` &limit=`1`]]' => '/assets/app/img/solution_items/sub-item-1.jpg',
    '[[$solutions-page-header]]' => '<!-- Title section -->
<section class="product-head" style="background-image: url([[!phpthumbof? &input=`/assets/app/img/solution_items/sub-item-1.jpg` &options=`&h=480&zc=1`]]);">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="product-head-bc">
					<a href="[[!++site_url]]">TMS | HOME</a>
					&nbsp;&gt;&nbsp;
					<a><!-- I think without href -->Solution sub item 5</a>
				</div>
				<h4 class="product-head-title title">Solution sub item 5</h4>
			</div>
		</div>
	</div>
</section>',
    '[[getImageList? 
    &tvname=`solution-page-interaction`
    &tpl=`solutions-page-interaction`
    &limit=`1`
]]' => '<!-- Interaction section -->
<section class="interaction">
	<div class="container">
		<div class="row">
			<div class="col-xl-8 col-lg-7 col-md-12">
				<div class="interaction-img-wrap"><img src="assets/app/img/solution_items/sub-item-1-img-1.png" alt=""></div>
			</div>
			<div class="col-xl-4 col-lg-5 col-md-12">
				<h5 class="interaction-title sub-title">LOREM IPSUM IS SIMPLY DUMMY TEXT OF THE PRINTING</h5>
				<div class="interaction-text">
					<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur</p>
<p>Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance.</p>
				</div>
			</div>
		</div>
	</div>
</section>',
    '[[pdoNeighbors?
				        &tplPrev=`@INLINE <div class="read-more-btn-wrap read-more-btn-prev">
			                <a href="/[[+uri]]" class="read-more-btn"><span>prev: </span>[[+menutitle]]</a>
			            </div>`
			            &tplNext=`@INLINE <div class="read-more-btn-wrap read-more-btn-next">
			                <a href="/[[+uri]]" class="read-more-btn"><span>next: </span>[[+menutitle]]</a>
			            </div>`
			            &hideUnsearchable=`1`
			            &tplWrapper=`@INLINE [[+prev]][[+next]]`
				    ]]' => '<div class="read-more-btn-wrap read-more-btn-prev">
			                <a href="/soution-1/solution-sub-item-3/" class="read-more-btn"><span>prev: </span>Solution sub item 3</a>
			            </div><div class="read-more-btn-wrap read-more-btn-next">
			                <a href="/soution-1/solution-sub-item-5/" class="read-more-btn"><span>next: </span>Solution sub item 4</a>
			            </div>',
    '[[$solutions-page]]' => '<!-- Description section -->
<section class="description">
	<div class="container">
		<div class="row">
			<div class="col-md-9 offset-md-3 col-sm-12">
				<h5 class="description-sub-title">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s</h5>
			</div>
			<div class="col-md-9 offset-md-3 col-sm-12">
	<div class="description-text">
		<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. </p>
		<p>Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.</p>
	</div>
</div>
<div class="col-md-12">
	<div class="description-cite">
		<p class="description-cite-text">“Once a team is clear about its lead measures, their view of the goal changes.”</p>
		<p class="description-cite-author">CHRIS MCCHESNEY, CO-AUTHOR OF THE 4 DISCIPLINES OF EXECUTION</p>
	</div>
</div>
<div class="col-md-9 offset-md-3 col-sm-12">
	<div class="description-list">
		<h4 class="description-list-sub-title sub-title">Some list items</h4>
		<ul class="description-list">
			<li class="description-list-item">
				<h5 class="description-list-title title">Research and analysis</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Planning the stages of the project</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Implementation of solutions</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Process Optimization</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
			<li class="description-list-item">
				<h5 class="description-list-title title">Inspiration and involvement of staff</h5>
				<p class="description-list-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</li>
		</ul>
	</div>
		</div>
	</div>
</section>

<!-- Interaction section -->
<section class="interaction">
	<div class="container">
		<div class="row">
			<div class="col-xl-8 col-lg-7 col-md-12">
				<div class="interaction-img-wrap"><img src="assets/app/img/solution_items/sub-item-1-img-1.png" alt=""></div>
			</div>
			<div class="col-xl-4 col-lg-5 col-md-12">
				<h5 class="interaction-title sub-title">LOREM IPSUM IS SIMPLY DUMMY TEXT OF THE PRINTING</h5>
				<div class="interaction-text">
					<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur</p>
<p>Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance.</p>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- Read more section -->
<section class="read-more">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="read-more-btn-cont">
				    <div class="read-more-btn-wrap read-more-btn-prev">
			                <a href="/soution-1/solution-sub-item-3/" class="read-more-btn"><span>prev: </span>Solution sub item 3</a>
			            </div><div class="read-more-btn-wrap read-more-btn-next">
			                <a href="/soution-1/solution-sub-item-5/" class="read-more-btn"><span>next: </span>Solution sub item 4</a>
			            </div>
				</div>
			</div>
		</div>
	</div>
</section>',
    '[[pdoField? &field=`footer-logo` &limit=`1` &id=`1`]]' => '/assets/app/img/logo-light.svg',
    '[[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-1]]`
                                &docid= `1`
                                &limit=`1`
                            ]]' => ' info',
    '[[getImageList? 
                                &tvname=`menu`
                                &tpl=`@CODE:<li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/[[+anchor]]">[[+title]]</a></li>`
                                &docid= `1`
                                &limit=`5`
                            ]]' => '<li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#slider">Home</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#about-us">about us</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#approach">approach</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#solutions">solutions</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#clients">our clients</a></li>',
    '[[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-2]]`
                                &docid= `1`
                                &limit=`1`
                            ]]' => ' contact us',
    '[[getImageList? 
                            &tvname=`footer-mail`
                            &tpl=`@CODE:<p class="footer-contacts-desc"><a href="mailto:[[+email]]" target="_blank">[[+email]]</a></p>`
                            &docid= `1`
                        ]]' => '<p class="footer-contacts-desc"><a href="mailto:info@richardson.com" target="_blank">info@richardson.com</a></p>',
    '[[getImageList? 
                            &tvname=`footer-phone`
                            &tpl=`@CODE:<p class="footer-contacts-desc">[[+region]]: <a href="tel:[[+phone]]" target="_blank">+[[+phone]]</a></p>`
                            &docid= `1`
                        ]]' => '<p class="footer-contacts-desc">US: <a href="tel:1-215-940-9255" target="_blank">+1-215-940-9255</a></p><p class="footer-contacts-desc">EMEA: <a href="tel:44 (0) 20 7917 1806" target="_blank">+44 (0) 20 7917 1806</a></p><p class="footer-contacts-desc">APAC: <a href="tel:61 (0) 8 8376 1667" target="_blank">+61 (0) 8 8376 1667</a></p>',
    '[[getImageList? 
                            &tvname=`footer-address`
                            &tpl=`@CODE:<p class="footer-contacts-address">[[+line-1]]<br>[[+line-2]]</p>`
                            &docid= `1`
                        ]]' => '<p class="footer-contacts-address">1818 Market Street, 2800,<br>Philadelphia, PA 19103</p>',
    '[[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-3]]`
                                &docid= `1`
                                &limit=`1`
                            ]]' => ' follow us',
    '[[getImageList? 
                                &tvname=`footer-social`
                                &tpl=`footer-social`
                                &docid= `1`
                            ]]' => '<div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/facebook-f-brands.svg" alt="facebook"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/linkedin-in-brands.svg" alt="linkedin"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/twitter-brands.svg" alt="twitter"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/instagram-brands.svg" alt="instagram"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/youtube-brands.svg" alt="youtube"></a>
</div>',
    '[[pdoField? &field=`footer-credits` &limit=`1`]]' => 'Copyright © 2018 Company. All rights reserved. | Privacy Policy',
    '[[$footer? &menuId=`http://ets.international/`]]' => '<!-- Footer section -->
	<footer class="footer" id="footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-sm-12 col-12 scroll-to-id">
					<a href="http://ets.international/#slider" class="footer-logo"><img src="/assets/app/img/logo-light.svg" alt="ETS International"></a>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-mnu">
						<h5 class="footer-mnu-title footer-title">
						     info
						</h5>
						<ul class="footer-mnu-line">
					    	<li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#slider">Home</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#about-us">about us</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#approach">approach</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#solutions">solutions</a></li><li class="footer-mnu-item scroll-to-id"><a href="http://ets.international/#clients">our clients</a></li>
                            <li class="footer-mnu-item scroll-to-id"><a href="#contacts">Contact us</a></li>
                        </ul>
					</div>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-contacts" id="contacts">
						<h5 class="footer-contacts-title footer-title">
						     contact us
						</h5>
					    <p class="footer-contacts-desc"><a href="mailto:info@richardson.com" target="_blank">info@richardson.com</a></p>
						<p class="footer-contacts-desc">US: <a href="tel:1-215-940-9255" target="_blank">+1-215-940-9255</a></p><p class="footer-contacts-desc">EMEA: <a href="tel:44 (0) 20 7917 1806" target="_blank">+44 (0) 20 7917 1806</a></p><p class="footer-contacts-desc">APAC: <a href="tel:61 (0) 8 8376 1667" target="_blank">+61 (0) 8 8376 1667</a></p>
                        <p class="footer-contacts-address">1818 Market Street, 2800,<br>Philadelphia, PA 19103</p>
					</div>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-social">
						<div class="footer-social-title footer-title">
						     follow us
						</div>
						<div class="footer-social-line">
						    <div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/facebook-f-brands.svg" alt="facebook"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/linkedin-in-brands.svg" alt="linkedin"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/twitter-brands.svg" alt="twitter"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/instagram-brands.svg" alt="instagram"></a>
</div><div class="footer-social-cont">
	<a href="" target="_blank"><img src="assets/app/img/social-icons/youtube-brands.svg" alt="youtube"></a>
</div>
						</div>
					</div>
				</div>
				<div class="col-md-12">
					<div class="footer-credits">
						<hr>
						<p class="footer-credits-desc">
							Copyright © 2018 Company. All rights reserved. | Privacy Policy
						</p>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<script src="assets/app/js/scripts.min.js"></script>

</body>
</html>',
  ),
  'sourceCache' => 
  array (
    'modChunk' => 
    array (
      'head' => 
      array (
        'fields' => 
        array (
          'id' => 5,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'head',
          'description' => '[[!If?
       &subject=`[[*pagetitle]]`
       &operator=`==`
       &operand=`Home`
       &then=`[[++site_name]]`
       &else=`[[*pagetitle]] - [[++site_name]]`
    ]]',
          'editor_type' => 0,
          'category' => 4,
          'cache_type' => 0,
          'snippet' => '<!DOCTYPE html>
<html lang="ru">

<head>

	<meta charset="[[++modx_charset]]">
	<base href="[[!++site_url]]">
    
	<title>[[+pageTitle]]</title>
	<meta name="description" content="[[*description]]">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	
	<!-- Template Basic Images Start -->
	<meta property="og:image" content="path/to/image.jpg">
	<link rel="icon" href="[[pdoField? &field=`favicon-small` &limit=`1`]]">
	<link rel="apple-touch-icon" sizes="180x180" href="[[pdoField? &field=`favicon-big` &limit=`1`]]">
	<!-- Template Basic Images End -->
	
	<!-- Custom Browsers Color Start -->
	<meta name="theme-color" content="#000">
	<!-- Custom Browsers Color End -->

	<link rel="stylesheet" href="assets/app/css/main.min.css">

</head>

<body>
    <div class="loader">
		<div class="loader_inner">
			<div class=\'loader-ring\'>
				<div class=\'loader-ring-light\'></div>
				<div class=\'loader-ring-track\'></div>
			</div>
		</div>
	</div>',
          'locked' => false,
          'properties' => 
          array (
            'pageTitle' => 
            array (
              'name' => 'pageTitle',
              'desc' => 'Title of the page',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '[[*pagetitle]] - [[++site_name]]',
              'lexicon' => NULL,
              'area' => '',
              'desc_trans' => 'Title of the page',
              'area_trans' => '',
            ),
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!DOCTYPE html>
<html lang="ru">

<head>

	<meta charset="[[++modx_charset]]">
	<base href="[[!++site_url]]">
    
	<title>[[+pageTitle]]</title>
	<meta name="description" content="[[*description]]">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	
	<!-- Template Basic Images Start -->
	<meta property="og:image" content="path/to/image.jpg">
	<link rel="icon" href="[[pdoField? &field=`favicon-small` &limit=`1`]]">
	<link rel="apple-touch-icon" sizes="180x180" href="[[pdoField? &field=`favicon-big` &limit=`1`]]">
	<!-- Template Basic Images End -->
	
	<!-- Custom Browsers Color Start -->
	<meta name="theme-color" content="#000">
	<!-- Custom Browsers Color End -->

	<link rel="stylesheet" href="assets/app/css/main.min.css">

</head>

<body>
    <div class="loader">
		<div class="loader_inner">
			<div class=\'loader-ring\'>
				<div class=\'loader-ring-light\'></div>
				<div class=\'loader-ring-track\'></div>
			</div>
		</div>
	</div>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
      'header' => 
      array (
        'fields' => 
        array (
          'id' => 6,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'header',
          'description' => '',
          'editor_type' => 0,
          'category' => 4,
          'cache_type' => 0,
          'snippet' => '
<!-- Menu section -->
<section class="mnu">
	<div class="mnu-mob"></div>
	<div class="container">
		<div class="row">
			<div class="col-lg-3 col-md-12 col-12 scroll-to-id">
				<a href="[[+menuId]]#slider" class="mnu-logo"><img src="[[pdoField? &field=`main-logo` &limit=`1` &id=`1`]]" alt="[[++site_name]]"></a>
				<div class="mnu-btn">
					<div class="sandwich">
						<div class="sw-topper"></div>
						<div class="sw-bottom"></div>
						<div class="sw-footer"></div>
					</div>
				</div>
			</div>
			<div class="col-lg-9 col-md-12 col-12">
				<ul class="mnu-line">
					[[getImageList? 
                        &tvname=`menu`
                        &tpl=`@CODE:<li class="mnu-item scroll-to-id"><a href="[[+menuId]][[+anchor]]">[[+title]]</a></li>`
                        &docid= `1`
                        &limit=`5`
                    ]]
                    <li class="mnu-item scroll-to-id"><a href="#contacts">Contact us</a></li>
                </ul>
			</div>
		</div>
	</div>
</section>
',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '
<!-- Menu section -->
<section class="mnu">
	<div class="mnu-mob"></div>
	<div class="container">
		<div class="row">
			<div class="col-lg-3 col-md-12 col-12 scroll-to-id">
				<a href="[[+menuId]]#slider" class="mnu-logo"><img src="[[pdoField? &field=`main-logo` &limit=`1` &id=`1`]]" alt="[[++site_name]]"></a>
				<div class="mnu-btn">
					<div class="sandwich">
						<div class="sw-topper"></div>
						<div class="sw-bottom"></div>
						<div class="sw-footer"></div>
					</div>
				</div>
			</div>
			<div class="col-lg-9 col-md-12 col-12">
				<ul class="mnu-line">
					[[getImageList? 
                        &tvname=`menu`
                        &tpl=`@CODE:<li class="mnu-item scroll-to-id"><a href="[[+menuId]][[+anchor]]">[[+title]]</a></li>`
                        &docid= `1`
                        &limit=`5`
                    ]]
                    <li class="mnu-item scroll-to-id"><a href="#contacts">Contact us</a></li>
                </ul>
			</div>
		</div>
	</div>
</section>
',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
      'solutions-page-header' => 
      array (
        'fields' => 
        array (
          'id' => 22,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'solutions-page-header',
          'description' => '',
          'editor_type' => 0,
          'category' => 11,
          'cache_type' => 0,
          'snippet' => '<!-- Title section -->
<section class="product-head" style="background-image: url([[!phpthumbof? &input=`[[pdoField? &field=`solution-page-header-img` &limit=`1`]]` &options=`&h=480&zc=1`]]);">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="product-head-bc">
					<a href="[[!++site_url]]">TMS | HOME</a>
					&nbsp;&gt;&nbsp;
					<a><!-- I think without href -->[[*pagetitle]]</a>
				</div>
				<h4 class="product-head-title title">[[*pagetitle]]</h4>
			</div>
		</div>
	</div>
</section>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!-- Title section -->
<section class="product-head" style="background-image: url([[!phpthumbof? &input=`[[pdoField? &field=`solution-page-header-img` &limit=`1`]]` &options=`&h=480&zc=1`]]);">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="product-head-bc">
					<a href="[[!++site_url]]">TMS | HOME</a>
					&nbsp;&gt;&nbsp;
					<a><!-- I think without href -->[[*pagetitle]]</a>
				</div>
				<h4 class="product-head-title title">[[*pagetitle]]</h4>
			</div>
		</div>
	</div>
</section>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'solutions-page' => 
      array (
        'fields' => 
        array (
          'id' => 20,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'solutions-page',
          'description' => '',
          'editor_type' => 0,
          'category' => 11,
          'cache_type' => 0,
          'snippet' => '<!-- Description section -->
<section class="description">
	<div class="container">
		<div class="row">
			<div class="col-md-9 offset-md-3 col-sm-12">
				<h5 class="description-sub-title">[[*longtitle]]</h5>
			</div>
			[[*content]]
		</div>
	</div>
</section>

[[getImageList? 
    &tvname=`solution-page-interaction`
    &tpl=`solutions-page-interaction`
    &limit=`1`
]]

<!-- Read more section -->
<section class="read-more">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="read-more-btn-cont">
				    [[pdoNeighbors?
				        &tplPrev=`@INLINE <div class="read-more-btn-wrap read-more-btn-prev">
			                <a href="/[[+uri]]" class="read-more-btn"><span>prev: </span>[[+menutitle]]</a>
			            </div>`
			            &tplNext=`@INLINE <div class="read-more-btn-wrap read-more-btn-next">
			                <a href="/[[+uri]]" class="read-more-btn"><span>next: </span>[[+menutitle]]</a>
			            </div>`
			            &hideUnsearchable=`1`
			            &tplWrapper=`@INLINE [[+prev]][[+next]]`
				    ]]
				</div>
			</div>
		</div>
	</div>
</section>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!-- Description section -->
<section class="description">
	<div class="container">
		<div class="row">
			<div class="col-md-9 offset-md-3 col-sm-12">
				<h5 class="description-sub-title">[[*longtitle]]</h5>
			</div>
			[[*content]]
		</div>
	</div>
</section>

[[getImageList? 
    &tvname=`solution-page-interaction`
    &tpl=`solutions-page-interaction`
    &limit=`1`
]]

<!-- Read more section -->
<section class="read-more">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="read-more-btn-cont">
				    [[pdoNeighbors?
				        &tplPrev=`@INLINE <div class="read-more-btn-wrap read-more-btn-prev">
			                <a href="/[[+uri]]" class="read-more-btn"><span>prev: </span>[[+menutitle]]</a>
			            </div>`
			            &tplNext=`@INLINE <div class="read-more-btn-wrap read-more-btn-next">
			                <a href="/[[+uri]]" class="read-more-btn"><span>next: </span>[[+menutitle]]</a>
			            </div>`
			            &hideUnsearchable=`1`
			            &tplWrapper=`@INLINE [[+prev]][[+next]]`
				    ]]
				</div>
			</div>
		</div>
	</div>
</section>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'footer' => 
      array (
        'fields' => 
        array (
          'id' => 11,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'footer',
          'description' => '',
          'editor_type' => 0,
          'category' => 10,
          'cache_type' => 0,
          'snippet' => '<!-- Footer section -->
	<footer class="footer" id="footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-sm-12 col-12 scroll-to-id">
					<a href="[[+menuId]]#slider" class="footer-logo"><img src="[[pdoField? &field=`footer-logo` &limit=`1` &id=`1`]]" alt="[[++site_name]]"></a>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-mnu">
						<h5 class="footer-mnu-title footer-title">
						    [[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-1]]`
                                &docid= `1`
                                &limit=`1`
                            ]]
						</h5>
						<ul class="footer-mnu-line">
					    	[[getImageList? 
                                &tvname=`menu`
                                &tpl=`@CODE:<li class="footer-mnu-item scroll-to-id"><a href="[[+menuId]][[+anchor]]">[[+title]]</a></li>`
                                &docid= `1`
                                &limit=`5`
                            ]]
                            <li class="footer-mnu-item scroll-to-id"><a href="#contacts">Contact us</a></li>
                        </ul>
					</div>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-contacts" id="contacts">
						<h5 class="footer-contacts-title footer-title">
						    [[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-2]]`
                                &docid= `1`
                                &limit=`1`
                            ]]
						</h5>
					    [[getImageList? 
                            &tvname=`footer-mail`
                            &tpl=`@CODE:<p class="footer-contacts-desc"><a href="mailto:[[+email]]" target="_blank">[[+email]]</a></p>`
                            &docid= `1`
                        ]]
						[[getImageList? 
                            &tvname=`footer-phone`
                            &tpl=`@CODE:<p class="footer-contacts-desc">[[+region]]: <a href="tel:[[+phone]]" target="_blank">+[[+phone]]</a></p>`
                            &docid= `1`
                        ]]
                        [[getImageList? 
                            &tvname=`footer-address`
                            &tpl=`@CODE:<p class="footer-contacts-address">[[+line-1]]<br>[[+line-2]]</p>`
                            &docid= `1`
                        ]]
					</div>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-social">
						<div class="footer-social-title footer-title">
						    [[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-3]]`
                                &docid= `1`
                                &limit=`1`
                            ]]
						</div>
						<div class="footer-social-line">
						    [[getImageList? 
                                &tvname=`footer-social`
                                &tpl=`footer-social`
                                &docid= `1`
                            ]]
						</div>
					</div>
				</div>
				<div class="col-md-12">
					<div class="footer-credits">
						<hr>
						<p class="footer-credits-desc">
							[[pdoField? &field=`footer-credits` &limit=`1`]]
						</p>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<script src="assets/app/js/scripts.min.js"></script>

</body>
</html>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!-- Footer section -->
	<footer class="footer" id="footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-sm-12 col-12 scroll-to-id">
					<a href="[[+menuId]]#slider" class="footer-logo"><img src="[[pdoField? &field=`footer-logo` &limit=`1` &id=`1`]]" alt="[[++site_name]]"></a>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-mnu">
						<h5 class="footer-mnu-title footer-title">
						    [[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-1]]`
                                &docid= `1`
                                &limit=`1`
                            ]]
						</h5>
						<ul class="footer-mnu-line">
					    	[[getImageList? 
                                &tvname=`menu`
                                &tpl=`@CODE:<li class="footer-mnu-item scroll-to-id"><a href="[[+menuId]][[+anchor]]">[[+title]]</a></li>`
                                &docid= `1`
                                &limit=`5`
                            ]]
                            <li class="footer-mnu-item scroll-to-id"><a href="#contacts">Contact us</a></li>
                        </ul>
					</div>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-contacts" id="contacts">
						<h5 class="footer-contacts-title footer-title">
						    [[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-2]]`
                                &docid= `1`
                                &limit=`1`
                            ]]
						</h5>
					    [[getImageList? 
                            &tvname=`footer-mail`
                            &tpl=`@CODE:<p class="footer-contacts-desc"><a href="mailto:[[+email]]" target="_blank">[[+email]]</a></p>`
                            &docid= `1`
                        ]]
						[[getImageList? 
                            &tvname=`footer-phone`
                            &tpl=`@CODE:<p class="footer-contacts-desc">[[+region]]: <a href="tel:[[+phone]]" target="_blank">+[[+phone]]</a></p>`
                            &docid= `1`
                        ]]
                        [[getImageList? 
                            &tvname=`footer-address`
                            &tpl=`@CODE:<p class="footer-contacts-address">[[+line-1]]<br>[[+line-2]]</p>`
                            &docid= `1`
                        ]]
					</div>
				</div>
				<div class="col-lg-3 col-sm-4 col-12">
					<div class="footer-social">
						<div class="footer-social-title footer-title">
						    [[getImageList? 
                                &tvname=`footer-titles`
                                &tpl=`@CODE: [[+title-3]]`
                                &docid= `1`
                                &limit=`1`
                            ]]
						</div>
						<div class="footer-social-line">
						    [[getImageList? 
                                &tvname=`footer-social`
                                &tpl=`footer-social`
                                &docid= `1`
                            ]]
						</div>
					</div>
				</div>
				<div class="col-md-12">
					<div class="footer-credits">
						<hr>
						<p class="footer-credits-desc">
							[[pdoField? &field=`footer-credits` &limit=`1`]]
						</p>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<script src="assets/app/js/scripts.min.js"></script>

</body>
</html>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
    ),
    'modSnippet' => 
    array (
      'pdoField' => 
      array (
        'fields' => 
        array (
          'id' => 12,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'pdoField',
          'description' => '',
          'editor_type' => 0,
          'category' => 3,
          'cache_type' => 0,
          'snippet' => '/** @var array $scriptProperties */
if (!empty($input)) {
    $id = $input;
}
if (!isset($default)) {
    $default = \'\';
}
if (!isset($output)) {
    $output = \'\';
}
$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\', true);
$isResource = $class == \'modResource\' || in_array($class, $modx->getDescendants(\'modResource\'));

if (empty($field)) {
    $field = \'pagetitle\';
}
$top = isset($top) ? intval($top) : 0;
$topLevel = isset($topLevel) ? intval($topLevel) : 0;
if (!empty($options)) {
    $options = trim($options);
    if ($options[0] == \'{\') {
        $tmp = json_decode($options, true);
        if (is_array($tmp)) {
            extract($tmp);
            $scriptProperties = array_merge($scriptProperties, $tmp);
        }
    } else {
        $field = $options;
    }
}
if (empty($id)) {
    if (!empty($modx->resource)) {
        $id = $modx->resource->id;
    } else {
        return \'You must specify an id of \' . $class;
    }
}
if (!isset($context)) {
    $context = \'\';
}

// Gets the parent from root of context, if specified
if ($isResource && $id && ($top || $topLevel)) {
    // Select needed context for parents functionality
    if (empty($context)) {
        $q = $modx->newQuery($class, $id);
        $q->select(\'context_key\');
        $tstart = microtime(true);
        if ($q->prepare() && $q->stmt->execute()) {
            $modx->queryTime += microtime(true) - $tstart;
            $modx->executedQueries++;
            $context = $q->stmt->fetch(PDO::FETCH_COLUMN);
        }
    }
    // Original pdoField logic
    if (empty($ultimate)) {
        if ($topLevel) {
            $pids = $modx->getChildIds(0, $topLevel, array(\'context\' => $context));
            $pid = $id;
            while (true) {
                $tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));
                if (!$pid = current($tmp)) {
                    break;
                } elseif (in_array($pid, $pids)) {
                    $id = $pid;
                    break;
                }
            }
        } elseif ($top) {
            $pid = $id;
            for ($i = 1; $i <= $top; $i++) {
                $tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));
                if (!$pid = current($tmp)) {
                    break;
                }
                $id = $pid;
            }
        }
    }
    // UltimateParent logic
    // https://github.com/splittingred/UltimateParent/blob/develop/core/components/ultimateparent/snippet.ultimateparent.php
    elseif ($id != $top) {
        $pid = $id;
        $pids = $modx->getParentIds($id, 10, array(\'context\' => $context));
        if (!$topLevel || count($pids) >= $topLevel) {
            while ($parentIds = $modx->getParentIds($id, 1, array(\'context\' => $context))) {
                $pid = array_pop($parentIds);
                if ($pid == $top) {
                    break;
                }
                $id = $pid;
                $parentIds = $modx->getParentIds($id, 10, array(\'context\' => $context));
                if ($topLevel && count($parentIds) < $topLevel) {
                    break;
                }
            }
        }
    }
}

/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded\');

$where = array($class . \'.id\' => $id);
// Add custom parameters
foreach (array(\'where\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Fields to select
$resourceColumns = array_keys($modx->getFieldMeta($class));
$field = strtolower($field);
if (in_array($field, $resourceColumns)) {
    $scriptProperties[\'select\'] = array($class => $field);
    $scriptProperties[\'includeTVs\'] = \'\';
} elseif ($isResource) {
    $scriptProperties[\'select\'] = array($class => \'id\');
    $scriptProperties[\'includeTVs\'] = $field;
}
// Additional default field
if (!empty($default)) {
    $default = strtolower($default);
    if (in_array($default, $resourceColumns)) {
        $scriptProperties[\'select\'][$class] .= \',\' . $default;
    } elseif ($isResource) {
        $scriptProperties[\'includeTVs\'] = empty($scriptProperties[\'includeTVs\'])
            ? $default
            : $scriptProperties[\'includeTVs\'] . \',\' . $default;
    }
}

$scriptProperties[\'disableConditions\'] = true;
if ($row = $pdoFetch->getObject($class, $where, $scriptProperties)) {
    foreach ($row as $k => $v) {
        if (strtolower($k) == $field && $v != \'\') {
            $output = $v;
            break;
        }
    }

    if (empty($output) && !empty($default)) {
        foreach ($row as $k => $v) {
            if (strtolower($k) == $default && $v != \'\') {
                $output = $v;
                break;
            }
        }
    }
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
          'locked' => false,
          'properties' => 
          array (
            'id' => 
            array (
              'name' => 'id',
              'desc' => 'pdotools_prop_id',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Id of the resource.',
              'area_trans' => '',
            ),
            'field' => 
            array (
              'name' => 'field',
              'desc' => 'pdotools_prop_field',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 'pagetitle',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Field of the resource.',
              'area_trans' => '',
            ),
            'prepareTVs' => 
            array (
              'name' => 'prepareTVs',
              'desc' => 'pdotools_prop_prepareTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '1',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Comma-separated list of TV names that need to be prepared. By default it is set to "1", so all TVs in "&includeTVs=``" will be prepared.',
              'area_trans' => '',
            ),
            'processTVs' => 
            array (
              'name' => 'processTVs',
              'desc' => 'pdotools_prop_processTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Comma-separated list of TV names that need to be processed. If you set it to "1" - all TVs in "&includeTVs=``" will be processed. By default it is empty.',
              'area_trans' => '',
            ),
            'where' => 
            array (
              'name' => 'where',
              'desc' => 'pdotools_prop_where',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'A JSON-style expression of criteria to build any additional where clauses from.',
              'area_trans' => '',
            ),
            'context' => 
            array (
              'name' => 'context',
              'desc' => 'pdotools_prop_field_context',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Context of resource for selecting its parents. Needed for work of parameters "&top" and "&topLevel".',
              'area_trans' => '',
            ),
            'top' => 
            array (
              'name' => 'top',
              'desc' => 'pdotools_prop_top',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Selects parent of specified "&id" on level "&top".',
              'area_trans' => '',
            ),
            'topLevel' => 
            array (
              'name' => 'topLevel',
              'desc' => 'pdotools_prop_topLevel',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Selects parent of specified "&id" on level "&topLevel" from root of context.',
              'area_trans' => '',
            ),
            'default' => 
            array (
              'name' => 'default',
              'desc' => 'pdotools_prop_field_default',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Specify an additional resource field the content of which will be returned if the field specified in "&field" is empty.',
              'area_trans' => '',
            ),
            'output' => 
            array (
              'name' => 'output',
              'desc' => 'pdotools_prop_field_output',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'This string will be returned if the the fields specified in "&default" and "&field" are empty.',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'pdotools_prop_toPlaceholder',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If set, will assign the result to this placeholder instead of outputting it directly.',
              'area_trans' => '',
            ),
            'ultimate' => 
            array (
              'name' => 'ultimate',
              'desc' => 'pdotools_prop_ultimate',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Parameters &top and &topLevel works as in snippet UltimateParent.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/pdotools/elements/snippets/snippet.pdofield.php',
          'content' => '/** @var array $scriptProperties */
if (!empty($input)) {
    $id = $input;
}
if (!isset($default)) {
    $default = \'\';
}
if (!isset($output)) {
    $output = \'\';
}
$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\', true);
$isResource = $class == \'modResource\' || in_array($class, $modx->getDescendants(\'modResource\'));

if (empty($field)) {
    $field = \'pagetitle\';
}
$top = isset($top) ? intval($top) : 0;
$topLevel = isset($topLevel) ? intval($topLevel) : 0;
if (!empty($options)) {
    $options = trim($options);
    if ($options[0] == \'{\') {
        $tmp = json_decode($options, true);
        if (is_array($tmp)) {
            extract($tmp);
            $scriptProperties = array_merge($scriptProperties, $tmp);
        }
    } else {
        $field = $options;
    }
}
if (empty($id)) {
    if (!empty($modx->resource)) {
        $id = $modx->resource->id;
    } else {
        return \'You must specify an id of \' . $class;
    }
}
if (!isset($context)) {
    $context = \'\';
}

// Gets the parent from root of context, if specified
if ($isResource && $id && ($top || $topLevel)) {
    // Select needed context for parents functionality
    if (empty($context)) {
        $q = $modx->newQuery($class, $id);
        $q->select(\'context_key\');
        $tstart = microtime(true);
        if ($q->prepare() && $q->stmt->execute()) {
            $modx->queryTime += microtime(true) - $tstart;
            $modx->executedQueries++;
            $context = $q->stmt->fetch(PDO::FETCH_COLUMN);
        }
    }
    // Original pdoField logic
    if (empty($ultimate)) {
        if ($topLevel) {
            $pids = $modx->getChildIds(0, $topLevel, array(\'context\' => $context));
            $pid = $id;
            while (true) {
                $tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));
                if (!$pid = current($tmp)) {
                    break;
                } elseif (in_array($pid, $pids)) {
                    $id = $pid;
                    break;
                }
            }
        } elseif ($top) {
            $pid = $id;
            for ($i = 1; $i <= $top; $i++) {
                $tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));
                if (!$pid = current($tmp)) {
                    break;
                }
                $id = $pid;
            }
        }
    }
    // UltimateParent logic
    // https://github.com/splittingred/UltimateParent/blob/develop/core/components/ultimateparent/snippet.ultimateparent.php
    elseif ($id != $top) {
        $pid = $id;
        $pids = $modx->getParentIds($id, 10, array(\'context\' => $context));
        if (!$topLevel || count($pids) >= $topLevel) {
            while ($parentIds = $modx->getParentIds($id, 1, array(\'context\' => $context))) {
                $pid = array_pop($parentIds);
                if ($pid == $top) {
                    break;
                }
                $id = $pid;
                $parentIds = $modx->getParentIds($id, 10, array(\'context\' => $context));
                if ($topLevel && count($parentIds) < $topLevel) {
                    break;
                }
            }
        }
    }
}

/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded\');

$where = array($class . \'.id\' => $id);
// Add custom parameters
foreach (array(\'where\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Fields to select
$resourceColumns = array_keys($modx->getFieldMeta($class));
$field = strtolower($field);
if (in_array($field, $resourceColumns)) {
    $scriptProperties[\'select\'] = array($class => $field);
    $scriptProperties[\'includeTVs\'] = \'\';
} elseif ($isResource) {
    $scriptProperties[\'select\'] = array($class => \'id\');
    $scriptProperties[\'includeTVs\'] = $field;
}
// Additional default field
if (!empty($default)) {
    $default = strtolower($default);
    if (in_array($default, $resourceColumns)) {
        $scriptProperties[\'select\'][$class] .= \',\' . $default;
    } elseif ($isResource) {
        $scriptProperties[\'includeTVs\'] = empty($scriptProperties[\'includeTVs\'])
            ? $default
            : $scriptProperties[\'includeTVs\'] . \',\' . $default;
    }
}

$scriptProperties[\'disableConditions\'] = true;
if ($row = $pdoFetch->getObject($class, $where, $scriptProperties)) {
    foreach ($row as $k => $v) {
        if (strtolower($k) == $field && $v != \'\') {
            $output = $v;
            break;
        }
    }

    if (empty($output) && !empty($default)) {
        foreach ($row as $k => $v) {
            if (strtolower($k) == $default && $v != \'\') {
                $output = $v;
                break;
            }
        }
    }
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $output);
} else {
    return $output;
}',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'getImageList' => 
      array (
        'fields' => 
        array (
          'id' => 21,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'getImageList',
          'description' => '',
          'editor_type' => 0,
          'category' => 5,
          'cache_type' => 0,
          'snippet' => '/**
 * getImageList
 *
 * Copyright 2009-2014 by Bruno Perner <b.perner@gmx.de>
 *
 * getImageList is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * getImageList is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * getImageList; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package migx
 */
/**
 * getImageList
 *
 * display Items from outputvalue of TV with custom-TV-input-type MIGX or from other JSON-string for MODx Revolution 
 *
 * @version 1.4
 * @author Bruno Perner <b.perner@gmx.de>
 * @copyright Copyright &copy; 2009-2014
 * @license http://www.gnu.org/licenses/old-licenses/gpl-2.0.html GNU General Public License
 * version 2 or (at your option) any later version.
 * @package migx
 */

/*example: <ul>[[!getImageList? &tvname=`myTV`&tpl=`@CODE:<li>[[+idx]]<img src="[[+imageURL]]"/><p>[[+imageAlt]]</p></li>`]]</ul>*/
/* get default properties */


$tvname = $modx->getOption(\'tvname\', $scriptProperties, \'\');
$inherit_children_tvname = $modx->getOption(\'inherit_children_tvname\', $scriptProperties, \'\');
$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'\');
$wrapperTpl = $modx->getOption(\'wrapperTpl\', $scriptProperties, \'\');
$emptyTpl = $modx->getOption(\'emptyTpl\', $scriptProperties, \'\'); 
$limit = $modx->getOption(\'limit\', $scriptProperties, \'0\');
$offset = $modx->getOption(\'offset\', $scriptProperties, 0);
$totalVar = $modx->getOption(\'totalVar\', $scriptProperties, \'total\');
$randomize = $modx->getOption(\'randomize\', $scriptProperties, false);
$preselectLimit = $modx->getOption(\'preselectLimit\', $scriptProperties, 0); // when random preselect important images
$where = $modx->getOption(\'where\', $scriptProperties, \'\');
$where = !empty($where) ? $modx->fromJSON($where) : array();
$sort = $modx->getOption(\'sort\', $scriptProperties, \'\');
$sort = !empty($sort) ? $modx->fromJSON($sort) : array();
$toSeparatePlaceholders = $modx->getOption(\'toSeparatePlaceholders\', $scriptProperties, false);
$toPlaceholder = $modx->getOption(\'toPlaceholder\', $scriptProperties, false);
$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \'\');
$splitSeparator = $modx->getOption(\'splitSeparator\', $scriptProperties, \'\');
$placeholdersKeyField = $modx->getOption(\'placeholdersKeyField\', $scriptProperties, \'MIGX_id\');
$toJsonPlaceholder = $modx->getOption(\'toJsonPlaceholder\', $scriptProperties, false);
$jsonVarKey = $modx->getOption(\'jsonVarKey\', $scriptProperties, \'migx_outputvalue\');
$outputvalue = $modx->getOption(\'value\', $scriptProperties, \'\');
$outputvalue = isset($_REQUEST[$jsonVarKey]) ? $_REQUEST[$jsonVarKey] : $outputvalue;
$docidVarKey = $modx->getOption(\'docidVarKey\', $scriptProperties, \'migx_docid\');
$docid = $modx->getOption(\'docid\', $scriptProperties, (isset($modx->resource) ? $modx->resource->get(\'id\') : 1));
$docid = isset($_REQUEST[$docidVarKey]) ? $_REQUEST[$docidVarKey] : $docid;
$processTVs = $modx->getOption(\'processTVs\', $scriptProperties, \'1\');
$reverse = $modx->getOption(\'reverse\', $scriptProperties, \'0\');
$sumFields = $modx->getOption(\'sumFields\', $scriptProperties, \'\');
$sumPrefix = $modx->getOption(\'sumPrefix\', $scriptProperties, \'summary_\');
$addfields = $modx->getOption(\'addfields\', $scriptProperties, \'\');
$addfields = !empty($addfields) ? explode(\',\', $addfields) : null;
//split json into parts
$splits = $modx->fromJson($modx->getOption(\'splits\', $scriptProperties, 0));
$splitTpl = $modx->getOption(\'splitTpl\', $scriptProperties, \'\');
$splitSeparator = $modx->getOption(\'splitSeparator\', $scriptProperties, \'\');
$inheritFrom = $modx->getOption(\'inheritFrom\', $scriptProperties, \'\'); //commaseparated list of resource-ids or/and the keyword \'parents\' where to inherit from
$inheritFrom = !empty($inheritFrom) ? explode(\',\', $inheritFrom) : \'\';

$modx->setPlaceholder(\'docid\', $docid);

$base_path = $modx->getOption(\'base_path\', null, MODX_BASE_PATH);
$base_url = $modx->getOption(\'base_url\', null, MODX_BASE_URL);

$migx = $modx->getService(\'migx\', \'Migx\', $modx->getOption(\'migx.core_path\', null, $modx->getOption(\'core_path\') . \'components/migx/\') . \'model/migx/\', $scriptProperties);
if (!($migx instanceof Migx))
    return \'\';
$migx->working_context = isset($modx->resource) ? $modx->resource->get(\'context_key\') : \'web\';

if (!empty($tvname)) {
    if ($tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $tvname))) {

        /*
        *   get inputProperties
        */


        $properties = $tv->get(\'input_properties\');
        $properties = isset($properties[\'formtabs\']) ? $properties : $tv->getProperties();

        $migx->config[\'configs\'] = $modx->getOption(\'configs\', $properties, \'\');
        if (!empty($migx->config[\'configs\'])) {
            $migx->loadConfigs();
            // get tabs from file or migx-config-table
            $formtabs = $migx->getTabs();
        }
        if (empty($formtabs) && isset($properties[\'formtabs\'])) {
            //try to get formtabs and its fields from properties
            $formtabs = $modx->fromJSON($properties[\'formtabs\']);
        }

        if (!empty($properties[\'basePath\'])) {
            if ($properties[\'autoResourceFolders\'] == \'true\') {
                $scriptProperties[\'base_path\'] = $base_path . $properties[\'basePath\'] . $docid . \'/\';
                $scriptProperties[\'base_url\'] = $base_url . $properties[\'basePath\'] . $docid . \'/\';
            } else {
                $scriptProperties[\'base_path\'] = $base_path . $properties[\'base_path\'];
                $scriptProperties[\'base_url\'] = $base_url . $properties[\'basePath\'];
            }
        }
        if ($jsonVarKey == \'migx_outputvalue\' && !empty($properties[\'jsonvarkey\'])) {
            $jsonVarKey = $properties[\'jsonvarkey\'];
            $outputvalue = isset($_REQUEST[$jsonVarKey]) ? $_REQUEST[$jsonVarKey] : $outputvalue;
        }

        if (empty($outputvalue)) {
            $outputvalue = $tv->renderOutput($docid);
            if (empty($outputvalue) && !empty($inheritFrom)) {
                foreach ($inheritFrom as $from) {
                    if ($from == \'parents\') {
                        if (!empty($inherit_children_tvname)){
                            //try to get items from optional MIGX-TV for children
                            if ($inh_tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $inherit_children_tvname))) {
                                $outputvalue = $inh_tv->processInheritBinding(\'\', $docid);    
                            }
                        }
                        $outputvalue = empty($outputvalue) ? $tv->processInheritBinding(\'\', $docid) : $outputvalue;
                    } else {
                        $outputvalue = $tv->renderOutput($from);
                    }
                    if (!empty($outputvalue)) {
                        break;
                    }
                }
            }
        }


        /*
        *   get inputTvs 
        */
        $inputTvs = array();
        if (is_array($formtabs)) {

            //multiple different Forms
            // Note: use same field-names and inputTVs in all forms
            $inputTvs = $migx->extractInputTvs($formtabs);
        }
        if ($migx->source = $tv->getSource($migx->working_context, false)) {
            $migx->source->initialize();
        }

    }


}

if (empty($outputvalue)) {
    $modx->setPlaceholder($totalVar, 0);
    return \'\';
}

//echo $outputvalue.\'<br/><br/>\';

$items = $modx->fromJSON($outputvalue);

// where filter
if (is_array($where) && count($where) > 0) {
    $items = $migx->filterItems($where, $items);
}
$modx->setPlaceholder($totalVar, count($items));

if (!empty($reverse)) {
    $items = array_reverse($items);
}

// sort items
if (is_array($sort) && count($sort) > 0) {
    $items = $migx->sortDbResult($items, $sort);
}

$summaries = array();
$output = \'\';
$items = $offset > 0 ? array_slice($items, $offset) : $items;
$count = count($items);

if ($count > 0) {
    $limit = $limit == 0 || $limit > $count ? $count : $limit;
    $preselectLimit = $preselectLimit > $count ? $count : $preselectLimit;
    //preselect important items
    $preitems = array();
    if ($randomize && $preselectLimit > 0) {
        for ($i = 0; $i < $preselectLimit; $i++) {
            $preitems[] = $items[$i];
            unset($items[$i]);
        }
        $limit = $limit - count($preitems);
    }

    //shuffle items
    if ($randomize) {
        shuffle($items);
    }

    //limit items
    $count = count($items);
    $tempitems = array();

    for ($i = 0; $i < $limit; $i++) {
        if ($i >= $count) {
            break;
        }
        $tempitems[] = $items[$i];
    }
    $items = $tempitems;

    //add preselected items and schuffle again
    if ($randomize && $preselectLimit > 0) {
        $items = array_merge($preitems, $items);
        shuffle($items);
    }

    $properties = array();
    foreach ($scriptProperties as $property => $value) {
        $properties[\'property.\' . $property] = $value;
    }

    $idx = 0;
    $output = array();
    $template = array();
    $count = count($items);

    foreach ($items as $key => $item) {
        $formname = isset($item[\'MIGX_formname\']) ? $item[\'MIGX_formname\'] . \'_\' : \'\';
        $fields = array();
        foreach ($item as $field => $value) {
            if (is_array($value)) {
                if (is_array($value[0])) {
                    //nested array - convert to json
                    $value = $modx->toJson($value);
                } else {
                    $value = implode(\'||\', $value); //handle arrays (checkboxes, multiselects)
                }
            }


            $inputTVkey = $formname . $field;

            if ($processTVs && isset($inputTvs[$inputTVkey])) {
                if (isset($inputTvs[$inputTVkey][\'inputTV\']) && $tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $inputTvs[$inputTVkey][\'inputTV\']))) {

                } else {
                    $tv = $modx->newObject(\'modTemplateVar\');
                    $tv->set(\'type\', $inputTvs[$inputTVkey][\'inputTVtype\']);
                }
                $inputTV = $inputTvs[$inputTVkey];

                $mTypes = $modx->getOption(\'manipulatable_url_tv_output_types\', null, \'image,file\');
                //don\'t manipulate any urls here
                $modx->setOption(\'manipulatable_url_tv_output_types\', \'\');
                $tv->set(\'default_text\', $value);
                $value = $tv->renderOutput($docid);
                //set option back
                $modx->setOption(\'manipulatable_url_tv_output_types\', $mTypes);
                //now manipulate urls
                if ($mediasource = $migx->getFieldSource($inputTV, $tv)) {
                    $mTypes = explode(\',\', $mTypes);
                    if (!empty($value) && in_array($tv->get(\'type\'), $mTypes)) {
                        //$value = $mediasource->prepareOutputUrl($value);
                        $value = str_replace(\'/./\', \'/\', $mediasource->prepareOutputUrl($value));
                    }
                }

            }
            $fields[$field] = $value;

        }

        if (!empty($addfields)) {
            foreach ($addfields as $addfield) {
                $addfield = explode(\':\', $addfield);
                $addname = $addfield[0];
                $adddefault = isset($addfield[1]) ? $addfield[1] : \'\';
                $fields[$addname] = $adddefault;
            }
        }

        if (!empty($sumFields)) {
            $sumFields = is_array($sumFields) ? $sumFields : explode(\',\', $sumFields);
            foreach ($sumFields as $sumField) {
                if (isset($fields[$sumField])) {
                    $summaries[$sumPrefix . $sumField] = $summaries[$sumPrefix . $sumField] + $fields[$sumField];
                    $fields[$sumPrefix . $sumField] = $summaries[$sumPrefix . $sumField];
                }
            }
        }


        if ($toJsonPlaceholder) {
            $output[] = $fields;
        } else {
            $fields[\'_alt\'] = $idx % 2;
            $idx++;
            $fields[\'_first\'] = $idx == 1 ? true : \'\';
            $fields[\'_last\'] = $idx == $limit ? true : \'\';
            $fields[\'idx\'] = $idx;
            $rowtpl = \'\';
            //get changing tpls from field
            if (substr($tpl, 0, 7) == "@FIELD:") {
                $tplField = substr($tpl, 7);
                $rowtpl = $fields[$tplField];
            }

            if ($fields[\'_first\'] && !empty($tplFirst)) {
                $rowtpl = $tplFirst;
            }
            if ($fields[\'_last\'] && empty($rowtpl) && !empty($tplLast)) {
                $rowtpl = $tplLast;
            }
            $tplidx = \'tpl_\' . $idx;
            if (empty($rowtpl) && !empty($$tplidx)) {
                $rowtpl = $$tplidx;
            }
            if ($idx > 1 && empty($rowtpl)) {
                $divisors = $migx->getDivisors($idx);
                if (!empty($divisors)) {
                    foreach ($divisors as $divisor) {
                        $tplnth = \'tpl_n\' . $divisor;
                        if (!empty($$tplnth)) {
                            $rowtpl = $$tplnth;
                            if (!empty($rowtpl)) {
                                break;
                            }
                        }
                    }
                }
            }

            if ($count == 1 && isset($tpl_oneresult)) {
                $rowtpl = $tpl_oneresult;
            }

            $fields = array_merge($fields, $properties);

            if (!empty($rowtpl)) {
                $template = $migx->getTemplate($tpl, $template);
                $fields[\'_tpl\'] = $template[$tpl];
            } else {
                $rowtpl = $tpl;

            }
            $template = $migx->getTemplate($rowtpl, $template);


            if ($template[$rowtpl]) {
                $chunk = $modx->newObject(\'modChunk\');
                $chunk->setCacheable(false);
                $chunk->setContent($template[$rowtpl]);


                if (!empty($placeholdersKeyField) && isset($fields[$placeholdersKeyField])) {
                    $output[$fields[$placeholdersKeyField]] = $chunk->process($fields);
                } else {
                    $output[] = $chunk->process($fields);
                }
            } else {
                if (!empty($placeholdersKeyField)) {
                    $output[$fields[$placeholdersKeyField]] = \'<pre>\' . print_r($fields, 1) . \'</pre>\';
                } else {
                    $output[] = \'<pre>\' . print_r($fields, 1) . \'</pre>\';
                }
            }
        }


    }
}

if (count($summaries) > 0) {
    $modx->toPlaceholders($summaries);
}


if ($toJsonPlaceholder) {
    $modx->setPlaceholder($toJsonPlaceholder, $modx->toJson($output));
    return \'\';
}

if (!empty($toSeparatePlaceholders)) {
    $modx->toPlaceholders($output, $toSeparatePlaceholders);
    return \'\';
}
/*
if (!empty($outerTpl))
$o = parseTpl($outerTpl, array(\'output\'=>implode($outputSeparator, $output)));
else 
*/

if ($count > 0 && $splits > 0) {
    $size = ceil($count / $splits);
    $chunks = array_chunk($output, $size);
    $output = array();
    foreach ($chunks as $chunk) {
        $o = implode($outputSeparator, $chunk);
        $output[] = $modx->getChunk($splitTpl, array(\'output\' => $o));
    }
    $outputSeparator = $splitSeparator;
}

if (is_array($output)) {
    $o = implode($outputSeparator, $output);
} else {
    $o = $output;
}

if (!empty($o) && !empty($wrapperTpl)) {
    $template = $migx->getTemplate($wrapperTpl);
    if ($template[$wrapperTpl]) {
        $chunk = $modx->newObject(\'modChunk\');
        $chunk->setCacheable(false);
        $chunk->setContent($template[$wrapperTpl]);
        $properties[\'output\'] = $o;
        $o = $chunk->process($properties);
    }
}

if (empty($o) && !empty($emptyTpl)) {
    $template = $migx->getTemplate($emptyTpl);
    if ($template[$emptyTpl]) {
        $chunk = $modx->newObject(\'modChunk\');
        $chunk->setCacheable(false);
        $chunk->setContent($template[$emptyTpl]);
        $o = $chunk->process($properties);
    }
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $o);
    return \'\';
}

return $o;',
          'locked' => false,
          'properties' => 
          array (
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * getImageList
 *
 * Copyright 2009-2014 by Bruno Perner <b.perner@gmx.de>
 *
 * getImageList is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * getImageList is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * getImageList; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package migx
 */
/**
 * getImageList
 *
 * display Items from outputvalue of TV with custom-TV-input-type MIGX or from other JSON-string for MODx Revolution 
 *
 * @version 1.4
 * @author Bruno Perner <b.perner@gmx.de>
 * @copyright Copyright &copy; 2009-2014
 * @license http://www.gnu.org/licenses/old-licenses/gpl-2.0.html GNU General Public License
 * version 2 or (at your option) any later version.
 * @package migx
 */

/*example: <ul>[[!getImageList? &tvname=`myTV`&tpl=`@CODE:<li>[[+idx]]<img src="[[+imageURL]]"/><p>[[+imageAlt]]</p></li>`]]</ul>*/
/* get default properties */


$tvname = $modx->getOption(\'tvname\', $scriptProperties, \'\');
$inherit_children_tvname = $modx->getOption(\'inherit_children_tvname\', $scriptProperties, \'\');
$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'\');
$wrapperTpl = $modx->getOption(\'wrapperTpl\', $scriptProperties, \'\');
$emptyTpl = $modx->getOption(\'emptyTpl\', $scriptProperties, \'\'); 
$limit = $modx->getOption(\'limit\', $scriptProperties, \'0\');
$offset = $modx->getOption(\'offset\', $scriptProperties, 0);
$totalVar = $modx->getOption(\'totalVar\', $scriptProperties, \'total\');
$randomize = $modx->getOption(\'randomize\', $scriptProperties, false);
$preselectLimit = $modx->getOption(\'preselectLimit\', $scriptProperties, 0); // when random preselect important images
$where = $modx->getOption(\'where\', $scriptProperties, \'\');
$where = !empty($where) ? $modx->fromJSON($where) : array();
$sort = $modx->getOption(\'sort\', $scriptProperties, \'\');
$sort = !empty($sort) ? $modx->fromJSON($sort) : array();
$toSeparatePlaceholders = $modx->getOption(\'toSeparatePlaceholders\', $scriptProperties, false);
$toPlaceholder = $modx->getOption(\'toPlaceholder\', $scriptProperties, false);
$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \'\');
$splitSeparator = $modx->getOption(\'splitSeparator\', $scriptProperties, \'\');
$placeholdersKeyField = $modx->getOption(\'placeholdersKeyField\', $scriptProperties, \'MIGX_id\');
$toJsonPlaceholder = $modx->getOption(\'toJsonPlaceholder\', $scriptProperties, false);
$jsonVarKey = $modx->getOption(\'jsonVarKey\', $scriptProperties, \'migx_outputvalue\');
$outputvalue = $modx->getOption(\'value\', $scriptProperties, \'\');
$outputvalue = isset($_REQUEST[$jsonVarKey]) ? $_REQUEST[$jsonVarKey] : $outputvalue;
$docidVarKey = $modx->getOption(\'docidVarKey\', $scriptProperties, \'migx_docid\');
$docid = $modx->getOption(\'docid\', $scriptProperties, (isset($modx->resource) ? $modx->resource->get(\'id\') : 1));
$docid = isset($_REQUEST[$docidVarKey]) ? $_REQUEST[$docidVarKey] : $docid;
$processTVs = $modx->getOption(\'processTVs\', $scriptProperties, \'1\');
$reverse = $modx->getOption(\'reverse\', $scriptProperties, \'0\');
$sumFields = $modx->getOption(\'sumFields\', $scriptProperties, \'\');
$sumPrefix = $modx->getOption(\'sumPrefix\', $scriptProperties, \'summary_\');
$addfields = $modx->getOption(\'addfields\', $scriptProperties, \'\');
$addfields = !empty($addfields) ? explode(\',\', $addfields) : null;
//split json into parts
$splits = $modx->fromJson($modx->getOption(\'splits\', $scriptProperties, 0));
$splitTpl = $modx->getOption(\'splitTpl\', $scriptProperties, \'\');
$splitSeparator = $modx->getOption(\'splitSeparator\', $scriptProperties, \'\');
$inheritFrom = $modx->getOption(\'inheritFrom\', $scriptProperties, \'\'); //commaseparated list of resource-ids or/and the keyword \'parents\' where to inherit from
$inheritFrom = !empty($inheritFrom) ? explode(\',\', $inheritFrom) : \'\';

$modx->setPlaceholder(\'docid\', $docid);

$base_path = $modx->getOption(\'base_path\', null, MODX_BASE_PATH);
$base_url = $modx->getOption(\'base_url\', null, MODX_BASE_URL);

$migx = $modx->getService(\'migx\', \'Migx\', $modx->getOption(\'migx.core_path\', null, $modx->getOption(\'core_path\') . \'components/migx/\') . \'model/migx/\', $scriptProperties);
if (!($migx instanceof Migx))
    return \'\';
$migx->working_context = isset($modx->resource) ? $modx->resource->get(\'context_key\') : \'web\';

if (!empty($tvname)) {
    if ($tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $tvname))) {

        /*
        *   get inputProperties
        */


        $properties = $tv->get(\'input_properties\');
        $properties = isset($properties[\'formtabs\']) ? $properties : $tv->getProperties();

        $migx->config[\'configs\'] = $modx->getOption(\'configs\', $properties, \'\');
        if (!empty($migx->config[\'configs\'])) {
            $migx->loadConfigs();
            // get tabs from file or migx-config-table
            $formtabs = $migx->getTabs();
        }
        if (empty($formtabs) && isset($properties[\'formtabs\'])) {
            //try to get formtabs and its fields from properties
            $formtabs = $modx->fromJSON($properties[\'formtabs\']);
        }

        if (!empty($properties[\'basePath\'])) {
            if ($properties[\'autoResourceFolders\'] == \'true\') {
                $scriptProperties[\'base_path\'] = $base_path . $properties[\'basePath\'] . $docid . \'/\';
                $scriptProperties[\'base_url\'] = $base_url . $properties[\'basePath\'] . $docid . \'/\';
            } else {
                $scriptProperties[\'base_path\'] = $base_path . $properties[\'base_path\'];
                $scriptProperties[\'base_url\'] = $base_url . $properties[\'basePath\'];
            }
        }
        if ($jsonVarKey == \'migx_outputvalue\' && !empty($properties[\'jsonvarkey\'])) {
            $jsonVarKey = $properties[\'jsonvarkey\'];
            $outputvalue = isset($_REQUEST[$jsonVarKey]) ? $_REQUEST[$jsonVarKey] : $outputvalue;
        }

        if (empty($outputvalue)) {
            $outputvalue = $tv->renderOutput($docid);
            if (empty($outputvalue) && !empty($inheritFrom)) {
                foreach ($inheritFrom as $from) {
                    if ($from == \'parents\') {
                        if (!empty($inherit_children_tvname)){
                            //try to get items from optional MIGX-TV for children
                            if ($inh_tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $inherit_children_tvname))) {
                                $outputvalue = $inh_tv->processInheritBinding(\'\', $docid);    
                            }
                        }
                        $outputvalue = empty($outputvalue) ? $tv->processInheritBinding(\'\', $docid) : $outputvalue;
                    } else {
                        $outputvalue = $tv->renderOutput($from);
                    }
                    if (!empty($outputvalue)) {
                        break;
                    }
                }
            }
        }


        /*
        *   get inputTvs 
        */
        $inputTvs = array();
        if (is_array($formtabs)) {

            //multiple different Forms
            // Note: use same field-names and inputTVs in all forms
            $inputTvs = $migx->extractInputTvs($formtabs);
        }
        if ($migx->source = $tv->getSource($migx->working_context, false)) {
            $migx->source->initialize();
        }

    }


}

if (empty($outputvalue)) {
    $modx->setPlaceholder($totalVar, 0);
    return \'\';
}

//echo $outputvalue.\'<br/><br/>\';

$items = $modx->fromJSON($outputvalue);

// where filter
if (is_array($where) && count($where) > 0) {
    $items = $migx->filterItems($where, $items);
}
$modx->setPlaceholder($totalVar, count($items));

if (!empty($reverse)) {
    $items = array_reverse($items);
}

// sort items
if (is_array($sort) && count($sort) > 0) {
    $items = $migx->sortDbResult($items, $sort);
}

$summaries = array();
$output = \'\';
$items = $offset > 0 ? array_slice($items, $offset) : $items;
$count = count($items);

if ($count > 0) {
    $limit = $limit == 0 || $limit > $count ? $count : $limit;
    $preselectLimit = $preselectLimit > $count ? $count : $preselectLimit;
    //preselect important items
    $preitems = array();
    if ($randomize && $preselectLimit > 0) {
        for ($i = 0; $i < $preselectLimit; $i++) {
            $preitems[] = $items[$i];
            unset($items[$i]);
        }
        $limit = $limit - count($preitems);
    }

    //shuffle items
    if ($randomize) {
        shuffle($items);
    }

    //limit items
    $count = count($items);
    $tempitems = array();

    for ($i = 0; $i < $limit; $i++) {
        if ($i >= $count) {
            break;
        }
        $tempitems[] = $items[$i];
    }
    $items = $tempitems;

    //add preselected items and schuffle again
    if ($randomize && $preselectLimit > 0) {
        $items = array_merge($preitems, $items);
        shuffle($items);
    }

    $properties = array();
    foreach ($scriptProperties as $property => $value) {
        $properties[\'property.\' . $property] = $value;
    }

    $idx = 0;
    $output = array();
    $template = array();
    $count = count($items);

    foreach ($items as $key => $item) {
        $formname = isset($item[\'MIGX_formname\']) ? $item[\'MIGX_formname\'] . \'_\' : \'\';
        $fields = array();
        foreach ($item as $field => $value) {
            if (is_array($value)) {
                if (is_array($value[0])) {
                    //nested array - convert to json
                    $value = $modx->toJson($value);
                } else {
                    $value = implode(\'||\', $value); //handle arrays (checkboxes, multiselects)
                }
            }


            $inputTVkey = $formname . $field;

            if ($processTVs && isset($inputTvs[$inputTVkey])) {
                if (isset($inputTvs[$inputTVkey][\'inputTV\']) && $tv = $modx->getObject(\'modTemplateVar\', array(\'name\' => $inputTvs[$inputTVkey][\'inputTV\']))) {

                } else {
                    $tv = $modx->newObject(\'modTemplateVar\');
                    $tv->set(\'type\', $inputTvs[$inputTVkey][\'inputTVtype\']);
                }
                $inputTV = $inputTvs[$inputTVkey];

                $mTypes = $modx->getOption(\'manipulatable_url_tv_output_types\', null, \'image,file\');
                //don\'t manipulate any urls here
                $modx->setOption(\'manipulatable_url_tv_output_types\', \'\');
                $tv->set(\'default_text\', $value);
                $value = $tv->renderOutput($docid);
                //set option back
                $modx->setOption(\'manipulatable_url_tv_output_types\', $mTypes);
                //now manipulate urls
                if ($mediasource = $migx->getFieldSource($inputTV, $tv)) {
                    $mTypes = explode(\',\', $mTypes);
                    if (!empty($value) && in_array($tv->get(\'type\'), $mTypes)) {
                        //$value = $mediasource->prepareOutputUrl($value);
                        $value = str_replace(\'/./\', \'/\', $mediasource->prepareOutputUrl($value));
                    }
                }

            }
            $fields[$field] = $value;

        }

        if (!empty($addfields)) {
            foreach ($addfields as $addfield) {
                $addfield = explode(\':\', $addfield);
                $addname = $addfield[0];
                $adddefault = isset($addfield[1]) ? $addfield[1] : \'\';
                $fields[$addname] = $adddefault;
            }
        }

        if (!empty($sumFields)) {
            $sumFields = is_array($sumFields) ? $sumFields : explode(\',\', $sumFields);
            foreach ($sumFields as $sumField) {
                if (isset($fields[$sumField])) {
                    $summaries[$sumPrefix . $sumField] = $summaries[$sumPrefix . $sumField] + $fields[$sumField];
                    $fields[$sumPrefix . $sumField] = $summaries[$sumPrefix . $sumField];
                }
            }
        }


        if ($toJsonPlaceholder) {
            $output[] = $fields;
        } else {
            $fields[\'_alt\'] = $idx % 2;
            $idx++;
            $fields[\'_first\'] = $idx == 1 ? true : \'\';
            $fields[\'_last\'] = $idx == $limit ? true : \'\';
            $fields[\'idx\'] = $idx;
            $rowtpl = \'\';
            //get changing tpls from field
            if (substr($tpl, 0, 7) == "@FIELD:") {
                $tplField = substr($tpl, 7);
                $rowtpl = $fields[$tplField];
            }

            if ($fields[\'_first\'] && !empty($tplFirst)) {
                $rowtpl = $tplFirst;
            }
            if ($fields[\'_last\'] && empty($rowtpl) && !empty($tplLast)) {
                $rowtpl = $tplLast;
            }
            $tplidx = \'tpl_\' . $idx;
            if (empty($rowtpl) && !empty($$tplidx)) {
                $rowtpl = $$tplidx;
            }
            if ($idx > 1 && empty($rowtpl)) {
                $divisors = $migx->getDivisors($idx);
                if (!empty($divisors)) {
                    foreach ($divisors as $divisor) {
                        $tplnth = \'tpl_n\' . $divisor;
                        if (!empty($$tplnth)) {
                            $rowtpl = $$tplnth;
                            if (!empty($rowtpl)) {
                                break;
                            }
                        }
                    }
                }
            }

            if ($count == 1 && isset($tpl_oneresult)) {
                $rowtpl = $tpl_oneresult;
            }

            $fields = array_merge($fields, $properties);

            if (!empty($rowtpl)) {
                $template = $migx->getTemplate($tpl, $template);
                $fields[\'_tpl\'] = $template[$tpl];
            } else {
                $rowtpl = $tpl;

            }
            $template = $migx->getTemplate($rowtpl, $template);


            if ($template[$rowtpl]) {
                $chunk = $modx->newObject(\'modChunk\');
                $chunk->setCacheable(false);
                $chunk->setContent($template[$rowtpl]);


                if (!empty($placeholdersKeyField) && isset($fields[$placeholdersKeyField])) {
                    $output[$fields[$placeholdersKeyField]] = $chunk->process($fields);
                } else {
                    $output[] = $chunk->process($fields);
                }
            } else {
                if (!empty($placeholdersKeyField)) {
                    $output[$fields[$placeholdersKeyField]] = \'<pre>\' . print_r($fields, 1) . \'</pre>\';
                } else {
                    $output[] = \'<pre>\' . print_r($fields, 1) . \'</pre>\';
                }
            }
        }


    }
}

if (count($summaries) > 0) {
    $modx->toPlaceholders($summaries);
}


if ($toJsonPlaceholder) {
    $modx->setPlaceholder($toJsonPlaceholder, $modx->toJson($output));
    return \'\';
}

if (!empty($toSeparatePlaceholders)) {
    $modx->toPlaceholders($output, $toSeparatePlaceholders);
    return \'\';
}
/*
if (!empty($outerTpl))
$o = parseTpl($outerTpl, array(\'output\'=>implode($outputSeparator, $output)));
else 
*/

if ($count > 0 && $splits > 0) {
    $size = ceil($count / $splits);
    $chunks = array_chunk($output, $size);
    $output = array();
    foreach ($chunks as $chunk) {
        $o = implode($outputSeparator, $chunk);
        $output[] = $modx->getChunk($splitTpl, array(\'output\' => $o));
    }
    $outputSeparator = $splitSeparator;
}

if (is_array($output)) {
    $o = implode($outputSeparator, $output);
} else {
    $o = $output;
}

if (!empty($o) && !empty($wrapperTpl)) {
    $template = $migx->getTemplate($wrapperTpl);
    if ($template[$wrapperTpl]) {
        $chunk = $modx->newObject(\'modChunk\');
        $chunk->setCacheable(false);
        $chunk->setContent($template[$wrapperTpl]);
        $properties[\'output\'] = $o;
        $o = $chunk->process($properties);
    }
}

if (empty($o) && !empty($emptyTpl)) {
    $template = $migx->getTemplate($emptyTpl);
    if ($template[$emptyTpl]) {
        $chunk = $modx->newObject(\'modChunk\');
        $chunk->setCacheable(false);
        $chunk->setContent($template[$emptyTpl]);
        $o = $chunk->process($properties);
    }
}

if (!empty($toPlaceholder)) {
    $modx->setPlaceholder($toPlaceholder, $o);
    return \'\';
}

return $o;',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
      'pdoNeighbors' => 
      array (
        'fields' => 
        array (
          'id' => 14,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'pdoNeighbors',
          'description' => '',
          'editor_type' => 0,
          'category' => 3,
          'cache_type' => 0,
          'snippet' => '/** @var array $scriptProperties */
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded\');

if (empty($id)) {
    $id = $modx->resource->id;
}
if (empty($limit)) {
    $limit = 1;
}
if (!isset($outputSeparator)) {
    $outputSeparator = "\\n";
}
$fastMode = !empty($fastMode);

$class = \'modResource\';
$resource = ($id == $modx->resource->id)
    ? $modx->resource
    : $modx->getObject($class, $id);
if (!$resource) {
    return \'\';
}

// We need to determine ids of neighbors
$params = $scriptProperties;
$params[\'select\'] = \'id\';
$params[\'limit\'] = 0;
if (!empty($parents) && is_string($parents)) {
    $parents = array_map(\'trim\', explode(\',\', $parents));
    if (!in_array($resource->parent, $parents)) {
        $parents[] = $resource->parent;
    }
    $key = array_search($resource->parent * -1, $parents);
    if ($key !== false) {
        unset($parents[$key]);
    }
    $params[\'parents\'] = implode(\',\', $parents);
    $ids = $pdoFetch->getCollection(\'modResource\', array(), $params);
    unset($scriptProperties[\'parents\']);
} else {
    $ids = $pdoFetch->getCollection(\'modResource\', array(\'parent\' => $resource->parent), $params);
}

$found = false;
$prev = $next = array();
foreach ($ids as $v) {
    if ($v[\'id\'] == $id) {
        $found = true;
        continue;
    } elseif (!$found) {
        $prev[] = $v[\'id\'];
    } else {
        $next[] = $v[\'id\'];
        if (count($next) >= $limit) {
            break;
        }
    }
}
$prev = array_splice($prev, $limit * -1);
if (!empty($loop)) {
    if (!count($prev)) {
        $v = end($ids);
        $prev[] = $v[\'id\'];
    } else {
        if (!count($next)) {
            $v = reset($ids);
            $next[] = $v[\'id\'];
        }
    }
}
$ids = array_merge($prev, $next, array($resource->parent));
$pdoFetch->addTime(\'Found ids of neighbors: \' . implode(\',\', $ids));

// Query conditions
$where = array($class . \'.id:IN\' => $ids);

// Fields to select
$resourceColumns = array_keys($modx->getFieldMeta($class));
if (empty($includeContent) && empty($useWeblinkUrl)) {
    $key = array_search(\'content\', $resourceColumns);
    unset($resourceColumns[$key]);
}
$select = array($class => implode(\',\', $resourceColumns));

// Add custom parameters
foreach (array(\'where\', \'select\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Default parameters
$default = array(
    \'class\' => $class,
    \'where\' => json_encode($where),
    \'select\' => json_encode($select),
    //\'groupby\' => $class.\'.id\',
    \'sortby\' => $class . \'.menuindex\',
    \'sortdir\' => \'ASC\',
    \'return\' => \'data\',
    \'limit\' => 0,
    \'totalVar\' => \'pdoneighbors.total\',
);

// Merge all properties and run!
unset($scriptProperties[\'limit\']);
$pdoFetch->addTime(\'Query parameters ready\');
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);

$rows = $pdoFetch->run();
$prev = array_flip($prev);
$next = array_flip($next);

$output = array(\'prev\' => array(), \'up\' => array(), \'next\' => array());
foreach ($rows as $row) {
    if (empty($row[\'menutitle\'])) {
        $row[\'menutitle\'] = $row[\'pagetitle\'];
    }
    if (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {
        $row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))
            ? $pdoFetch->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), $row)
            : $row[\'content\'];
    } else {
        $row[\'link\'] = $pdoFetch->makeUrl($row[\'id\'], $row);
    }

    if (isset($prev[$row[\'id\']])) {
        $output[\'prev\'][] = !empty($tplPrev)
            ? $pdoFetch->getChunk($tplPrev, $row, $fastMode)
            : $pdoFetch->getChunk(\'\', $row);
    } elseif (isset($next[$row[\'id\']])) {
        $output[\'next\'][] = !empty($tplNext)
            ? $pdoFetch->getChunk($tplNext, $row, $fastMode)
            : $pdoFetch->getChunk(\'\', $row);
    } else {
        $output[\'up\'][] = !empty($tplUp)
            ? $pdoFetch->getChunk($tplUp, $row, $fastMode)
            : $pdoFetch->getChunk(\'\', $row);
    }
}
$pdoFetch->addTime(\'Chunks processed\');

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="pdoNeighborsLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

foreach ($output as &$row) {
    $row = implode($outputSeparator, $row);
}

if (!empty($toSeparatePlaceholders)) {
    $output[\'log\'] = $log;
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
} else {
    if (!empty($rows) || !empty($wrapIfEmpty)) {
        $output = !empty($tplWrapper)
            ? $pdoFetch->getChunk($tplWrapper, $output, $fastMode)
            : $pdoFetch->getChunk(\'\', $output);
    } else {
        $output = \'\';
    }
    $output .= $log;

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
}',
          'locked' => false,
          'properties' => 
          array (
            'id' => 
            array (
              'name' => 'id',
              'desc' => 'pdotools_prop_id',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Id of the resource.',
              'area_trans' => '',
            ),
            'limit' => 
            array (
              'name' => 'limit',
              'desc' => 'pdotools_prop_neighbors_limit',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 1,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'The number of neighboring documents on the right and left. The default is 1.',
              'area_trans' => '',
            ),
            'sortby' => 
            array (
              'name' => 'sortby',
              'desc' => 'pdotools_prop_sortby',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'menuindex',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Any Resource Field (including Template Variables if they have been included) to sort by. Some common fields to sort on are publishedon, menuindex, pagetitle etc., but see the Resources documentation for all fields. Specify fields with the name only, not using the tag syntax. Note that when using fields like template, publishedby and the likes for sorting, it will be sorted on the raw values, so the template or user ID, and NOT their names. You can also sort randomly by specifying RAND().',
              'area_trans' => '',
            ),
            'sortdir' => 
            array (
              'name' => 'sortdir',
              'desc' => 'pdotools_prop_sortdir',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'asc',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Order which to sort by: descending or ascending',
              'area_trans' => '',
            ),
            'depth' => 
            array (
              'name' => 'depth',
              'desc' => 'pdotools_prop_depth',
              'type' => 'numberfield',
              'options' => 
              array (
              ),
              'value' => 0,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Integer value indicating depth to search for resources from each parent. First level of resources below parent has a depth of 1.',
              'area_trans' => '',
            ),
            'tplPrev' => 
            array (
              'name' => 'tplPrev',
              'desc' => 'pdotools_prop_tplPrev',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '@INLINE <span class="link-prev"><a href="[[+link]]">&larr; [[+menutitle]]</a></span>',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Сhunk with link to previous document.',
              'area_trans' => '',
            ),
            'tplUp' => 
            array (
              'name' => 'tplUp',
              'desc' => 'pdotools_prop_tplUp',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '@INLINE <span class="link-up">&uarr; <a href="[[+link]]">[[+menutitle]]</a></span>',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Сhunk with link to the parent document.',
              'area_trans' => '',
            ),
            'tplNext' => 
            array (
              'name' => 'tplNext',
              'desc' => 'pdotools_prop_tplNext',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '@INLINE <span class="link-next"><a href="[[+link]]">[[+menutitle]] &rarr;</a></span>',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Сhunk with link to the following document.',
              'area_trans' => '',
            ),
            'tplWrapper' => 
            array (
              'name' => 'tplWrapper',
              'desc' => 'pdotools_prop_neighbors_tplWrapper',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '@INLINE <div class="neighbors">[[+prev]][[+up]][[+next]]</div>',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Name of a chunk serving as a wrapper template for the output. This does not work with toSeparatePlaceholders.',
              'area_trans' => '',
            ),
            'wrapIfEmpty' => 
            array (
              'name' => 'wrapIfEmpty',
              'desc' => 'pdotools_prop_wrapIfEmpty',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If true, will output the wrapper specified in &tplWrapper even if the output is empty.',
              'area_trans' => '',
            ),
            'showUnpublished' => 
            array (
              'name' => 'showUnpublished',
              'desc' => 'pdotools_prop_showUnpublished',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If true, will also show Resources regardless if they are unpublished.',
              'area_trans' => '',
            ),
            'showDeleted' => 
            array (
              'name' => 'showDeleted',
              'desc' => 'pdotools_prop_showDeleted',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If true, will show Resources regardless if they are deleted.',
              'area_trans' => '',
            ),
            'showHidden' => 
            array (
              'name' => 'showHidden',
              'desc' => 'pdotools_prop_showHidden',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If true, will show Resources regardless if they are hidden from the menus.',
              'area_trans' => '',
            ),
            'hideContainers' => 
            array (
              'name' => 'hideContainers',
              'desc' => 'pdotools_prop_hideContainers',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If set, will not show any Resources marked as a container (isfolder).',
              'area_trans' => '',
            ),
            'toSeparatePlaceholders' => 
            array (
              'name' => 'toSeparatePlaceholders',
              'desc' => 'pdotools_prop_toSeparatePlaceholders',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If set, will assign EACH result to a separate placeholder named by this param suffixed with a sequential number (starting from 0).',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'pdotools_prop_toPlaceholder',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If set, will assign the result to this placeholder instead of outputting it directly.',
              'area_trans' => '',
            ),
            'parents' => 
            array (
              'name' => 'parents',
              'desc' => 'pdotools_prop_parents',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Comma-delimited list of ids serving as parents. Use "0" to ignore parents when specifying resources to include. Prefix an id of parent with a dash to exclude it and its children from the result.',
              'area_trans' => '',
            ),
            'outputSeparator' => 
            array (
              'name' => 'outputSeparator',
              'desc' => 'pdotools_prop_outputSeparator',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '
',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'An optional string to separate each tpl instance.',
              'area_trans' => '',
            ),
            'showLog' => 
            array (
              'name' => 'showLog',
              'desc' => 'pdotools_prop_showLog',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If true, snippet will add detailed log of query for developers.',
              'area_trans' => '',
            ),
            'fastMode' => 
            array (
              'name' => 'fastMode',
              'desc' => 'pdotools_prop_fastMode',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => false,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Fast chunks processing. If true, MODX parser will not be used and unprocessed tags will be cut.',
              'area_trans' => '',
            ),
            'includeTVs' => 
            array (
              'name' => 'includeTVs',
              'desc' => 'pdotools_prop_includeTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'An optional comma-delimited list of TemplateVar names to include.',
              'area_trans' => '',
            ),
            'prepareTVs' => 
            array (
              'name' => 'prepareTVs',
              'desc' => 'pdotools_prop_prepareTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '1',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Comma-separated list of TV names that need to be prepared. By default it is set to "1", so all TVs in "&includeTVs=``" will be prepared.',
              'area_trans' => '',
            ),
            'processTVs' => 
            array (
              'name' => 'processTVs',
              'desc' => 'pdotools_prop_processTVs',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Comma-separated list of TV names that need to be processed. If you set it to "1" - all TVs in "&includeTVs=``" will be processed. By default it is empty.',
              'area_trans' => '',
            ),
            'tvPrefix' => 
            array (
              'name' => 'tvPrefix',
              'desc' => 'pdotools_prop_tvPrefix',
              'type' => 'textfield',
              'options' => 
              array (
              ),
              'value' => 'tv.',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'The prefix for TemplateVar properties.',
              'area_trans' => '',
            ),
            'scheme' => 
            array (
              'name' => 'scheme',
              'desc' => 'pdotools_prop_scheme',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'value' => '',
                  'text' => 'System default',
                  'name' => 'System default',
                ),
                1 => 
                array (
                  'value' => -1,
                  'text' => '-1 (relative to site_url)',
                  'name' => '-1 (relative to site_url)',
                ),
                2 => 
                array (
                  'value' => 'full',
                  'text' => 'full (absolute, prepended with site_url)',
                  'name' => 'full (absolute, prepended with site_url)',
                ),
                3 => 
                array (
                  'value' => 'abs',
                  'text' => 'abs (absolute, prepended with base_url)',
                  'name' => 'abs (absolute, prepended with base_url)',
                ),
                4 => 
                array (
                  'value' => 'http',
                  'text' => 'http (absolute, forced to http scheme)',
                  'name' => 'http (absolute, forced to http scheme)',
                ),
                5 => 
                array (
                  'value' => 'https',
                  'text' => 'https (absolute, forced to https scheme)',
                  'name' => 'https (absolute, forced to https scheme)',
                ),
              ),
              'value' => '',
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Scheme of generation of links: "uri" for the substitution of document uri (very fast) or a parameter to modX::makeUrl().',
              'area_trans' => '',
            ),
            'useWeblinkUrl' => 
            array (
              'name' => 'useWeblinkUrl',
              'desc' => 'pdotools_prop_useWeblinkUrl',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'If WebLinks are used in the output, script will output the link specified in the WebLink instead of the normal MODX link. To use the standard display of WebLinks (like any other Resource) set this to 0.',
              'area_trans' => '',
            ),
            'loop' => 
            array (
              'name' => 'loop',
              'desc' => 'pdotools_prop_loop',
              'type' => 'combo-boolean',
              'options' => 
              array (
              ),
              'value' => true,
              'lexicon' => 'pdotools:properties',
              'area' => '',
              'desc_trans' => 'Loop the links. If there no link to the next page, make the link to the first page and vice versa',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => 'core/components/pdotools/elements/snippets/snippet.pdoneighbors.php',
          'content' => '/** @var array $scriptProperties */
/** @var pdoFetch $pdoFetch */
$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);
$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components/pdotools/model/\', true);
if ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {
    $pdoFetch = new $pdoClass($modx, $scriptProperties);
} else {
    return false;
}
$pdoFetch->addTime(\'pdoTools loaded\');

if (empty($id)) {
    $id = $modx->resource->id;
}
if (empty($limit)) {
    $limit = 1;
}
if (!isset($outputSeparator)) {
    $outputSeparator = "\\n";
}
$fastMode = !empty($fastMode);

$class = \'modResource\';
$resource = ($id == $modx->resource->id)
    ? $modx->resource
    : $modx->getObject($class, $id);
if (!$resource) {
    return \'\';
}

// We need to determine ids of neighbors
$params = $scriptProperties;
$params[\'select\'] = \'id\';
$params[\'limit\'] = 0;
if (!empty($parents) && is_string($parents)) {
    $parents = array_map(\'trim\', explode(\',\', $parents));
    if (!in_array($resource->parent, $parents)) {
        $parents[] = $resource->parent;
    }
    $key = array_search($resource->parent * -1, $parents);
    if ($key !== false) {
        unset($parents[$key]);
    }
    $params[\'parents\'] = implode(\',\', $parents);
    $ids = $pdoFetch->getCollection(\'modResource\', array(), $params);
    unset($scriptProperties[\'parents\']);
} else {
    $ids = $pdoFetch->getCollection(\'modResource\', array(\'parent\' => $resource->parent), $params);
}

$found = false;
$prev = $next = array();
foreach ($ids as $v) {
    if ($v[\'id\'] == $id) {
        $found = true;
        continue;
    } elseif (!$found) {
        $prev[] = $v[\'id\'];
    } else {
        $next[] = $v[\'id\'];
        if (count($next) >= $limit) {
            break;
        }
    }
}
$prev = array_splice($prev, $limit * -1);
if (!empty($loop)) {
    if (!count($prev)) {
        $v = end($ids);
        $prev[] = $v[\'id\'];
    } else {
        if (!count($next)) {
            $v = reset($ids);
            $next[] = $v[\'id\'];
        }
    }
}
$ids = array_merge($prev, $next, array($resource->parent));
$pdoFetch->addTime(\'Found ids of neighbors: \' . implode(\',\', $ids));

// Query conditions
$where = array($class . \'.id:IN\' => $ids);

// Fields to select
$resourceColumns = array_keys($modx->getFieldMeta($class));
if (empty($includeContent) && empty($useWeblinkUrl)) {
    $key = array_search(\'content\', $resourceColumns);
    unset($resourceColumns[$key]);
}
$select = array($class => implode(\',\', $resourceColumns));

// Add custom parameters
foreach (array(\'where\', \'select\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $scriptProperties[$v];
        if (!is_array($tmp)) {
            $tmp = json_decode($tmp, true);
        }
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}
$pdoFetch->addTime(\'Conditions prepared\');

// Default parameters
$default = array(
    \'class\' => $class,
    \'where\' => json_encode($where),
    \'select\' => json_encode($select),
    //\'groupby\' => $class.\'.id\',
    \'sortby\' => $class . \'.menuindex\',
    \'sortdir\' => \'ASC\',
    \'return\' => \'data\',
    \'limit\' => 0,
    \'totalVar\' => \'pdoneighbors.total\',
);

// Merge all properties and run!
unset($scriptProperties[\'limit\']);
$pdoFetch->addTime(\'Query parameters ready\');
$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);

$rows = $pdoFetch->run();
$prev = array_flip($prev);
$next = array_flip($next);

$output = array(\'prev\' => array(), \'up\' => array(), \'next\' => array());
foreach ($rows as $row) {
    if (empty($row[\'menutitle\'])) {
        $row[\'menutitle\'] = $row[\'pagetitle\'];
    }
    if (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {
        $row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))
            ? $pdoFetch->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), $row)
            : $row[\'content\'];
    } else {
        $row[\'link\'] = $pdoFetch->makeUrl($row[\'id\'], $row);
    }

    if (isset($prev[$row[\'id\']])) {
        $output[\'prev\'][] = !empty($tplPrev)
            ? $pdoFetch->getChunk($tplPrev, $row, $fastMode)
            : $pdoFetch->getChunk(\'\', $row);
    } elseif (isset($next[$row[\'id\']])) {
        $output[\'next\'][] = !empty($tplNext)
            ? $pdoFetch->getChunk($tplNext, $row, $fastMode)
            : $pdoFetch->getChunk(\'\', $row);
    } else {
        $output[\'up\'][] = !empty($tplUp)
            ? $pdoFetch->getChunk($tplUp, $row, $fastMode)
            : $pdoFetch->getChunk(\'\', $row);
    }
}
$pdoFetch->addTime(\'Chunks processed\');

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="pdoNeighborsLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

foreach ($output as &$row) {
    $row = implode($outputSeparator, $row);
}

if (!empty($toSeparatePlaceholders)) {
    $output[\'log\'] = $log;
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
} else {
    if (!empty($rows) || !empty($wrapIfEmpty)) {
        $output = !empty($tplWrapper)
            ? $pdoFetch->getChunk($tplWrapper, $output, $fastMode)
            : $pdoFetch->getChunk(\'\', $output);
    } else {
        $output = \'\';
    }
    $output .= $log;

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    } else {
        return $output;
    }
}',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'phpthumbof' => 
      array (
        'fields' => 
        array (
          'id' => 19,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'phpthumbof',
          'description' => 'A custom output filter that generates thumbnails securely with phpThumb.',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '/**
 * phpThumbOf
 *
 * Copyright 2009-2012 by Shaun McCormick <shaun@modx.com>
 *
 * phpThumbOf is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * phpThumbOf is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * phpThumbOf; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package phpthumbof
 */
/**
 * A custom output filter for phpThumb
 *
 * @var modX $modx
 * @var array $scriptProperties
 * @var phpThumbOf $phpThumbOf
 * @var string $input
 * @var string|array $options
 *
 * @package phpthumbof
 */
if (empty($modx)) return \'\';
if (!$modx->loadClass(\'modPhpThumb\',$modx->getOption(\'core_path\').\'model/phpthumb/\',true,true)) {
    $modx->log(modX::LOG_LEVEL_ERROR,\'[phpThumbOf] Could not load modPhpThumb class.\');
    return \'\';
}
if (empty($input)) {
    $modx->log(modX::LOG_LEVEL_DEBUG,\'[phpThumbOf] Empty image path passed, aborting.\');
    return \'\';
}
$modelPath = $modx->getOption(\'phpthumbof.core_path\',null,$modx->getOption(\'core_path\').\'components/phpthumbof/\').\'model/\';
require_once $modelPath.\'phpthumbof/phpthumbof.class.php\';
$phpThumbOf = new phpThumbOf($modx,$scriptProperties);

$phpThumbOf->getCacheDirectory();
$phpThumbOf->ensureCacheDirectoryIsWritable();

$thumbnail = $phpThumbOf->createThumbnailObject();
$thumbnail->setInput($input);
$thumbnail->setOptions($options);
$thumbnail->initializeService();
return $thumbnail->render();',
          'locked' => false,
          'properties' => NULL,
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * phpThumbOf
 *
 * Copyright 2009-2012 by Shaun McCormick <shaun@modx.com>
 *
 * phpThumbOf is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any
 * later version.
 *
 * phpThumbOf is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * phpThumbOf; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package phpthumbof
 */
/**
 * A custom output filter for phpThumb
 *
 * @var modX $modx
 * @var array $scriptProperties
 * @var phpThumbOf $phpThumbOf
 * @var string $input
 * @var string|array $options
 *
 * @package phpthumbof
 */
if (empty($modx)) return \'\';
if (!$modx->loadClass(\'modPhpThumb\',$modx->getOption(\'core_path\').\'model/phpthumb/\',true,true)) {
    $modx->log(modX::LOG_LEVEL_ERROR,\'[phpThumbOf] Could not load modPhpThumb class.\');
    return \'\';
}
if (empty($input)) {
    $modx->log(modX::LOG_LEVEL_DEBUG,\'[phpThumbOf] Empty image path passed, aborting.\');
    return \'\';
}
$modelPath = $modx->getOption(\'phpthumbof.core_path\',null,$modx->getOption(\'core_path\').\'components/phpthumbof/\').\'model/\';
require_once $modelPath.\'phpthumbof/phpthumbof.class.php\';
$phpThumbOf = new phpThumbOf($modx,$scriptProperties);

$phpThumbOf->getCacheDirectory();
$phpThumbOf->ensureCacheDirectoryIsWritable();

$thumbnail = $phpThumbOf->createThumbnailObject();
$thumbnail->setInput($input);
$thumbnail->setOptions($options);
$thumbnail->initializeService();
return $thumbnail->render();',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
    ),
    'modTemplateVar' => 
    array (
    ),
  ),
);